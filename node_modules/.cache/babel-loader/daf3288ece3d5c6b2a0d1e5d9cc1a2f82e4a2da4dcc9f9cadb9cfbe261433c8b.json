{"ast":null,"code":"var _jsxFileName = \"/home/leo/amr-developer-interface/src/components/AMRDeveloperInterface.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Square, ArrowUp, ArrowDown, ArrowLeft, ArrowRight, Battery, Camera, MapPin, Activity, Map, Home, Play, Pause, RotateCw, RotateCcw, Wifi, WifiOff, Trash2 } from 'lucide-react';\n\n// 從全局變量獲取 ROSLIB\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ROSLIB = window.ROSLIB || (() => {\n  console.warn('ROSLIB 未加載，使用模擬模式');\n  return {\n    Ros: class {\n      constructor() {\n        this.isConnected = false;\n      }\n      connect() {\n        console.log('模擬 ROS 連接');\n        setTimeout(() => {\n          this.isConnected = true;\n          if (this.onConnection) this.onConnection();\n        }, 1000);\n      }\n      close() {\n        this.isConnected = false;\n      }\n      on() {}\n    },\n    Topic: class {\n      publish() {}\n      subscribe() {}\n    },\n    Service: class {\n      callService() {}\n    },\n    Message: class {\n      constructor(data) {\n        Object.assign(this, data);\n      }\n    }\n  };\n})();\nconst TurtleBotInterface = () => {\n  _s();\n  // ROS 連接狀態\n  const [rosConnected, setRosConnected] = useState(false);\n  const [rosUrl, setRosUrl] = useState('ws://localhost:9090');\n\n  // 機器人狀態\n  const [robotStatus, setRobotStatus] = useState('未連接');\n  const [batteryLevel, setBatteryLevel] = useState(85);\n  const [currentPose, setCurrentPose] = useState({\n    x: 0,\n    y: 0,\n    theta: 0\n  });\n  const [linearVel, setLinearVel] = useState(0);\n  const [angularVel, setAngularVel] = useState(0);\n  const [speed, setSpeed] = useState(0.2);\n  const [angularSpeed, setAngularSpeed] = useState(0.5);\n\n  // 地圖和導航\n  const [currentMode, setCurrentMode] = useState('teleop');\n  const [mapData, setMapData] = useState(null);\n  const [stations, setStations] = useState([{\n    id: 1,\n    name: '充電站',\n    x: 50,\n    y: 50,\n    type: 'charging',\n    color: 'bg-green-500'\n  }, {\n    id: 2,\n    name: '工作站A',\n    x: 300,\n    y: 80,\n    type: 'work',\n    color: 'bg-blue-500'\n  }, {\n    id: 3,\n    name: '工作站B',\n    x: 350,\n    y: 200,\n    type: 'work',\n    color: 'bg-blue-500'\n  }]);\n  const [waypoints, setWaypoints] = useState([{\n    id: 1,\n    x: 100,\n    y: 75,\n    order: 1\n  }, {\n    id: 2,\n    x: 250,\n    y: 120,\n    order: 2\n  }, {\n    id: 3,\n    x: 320,\n    y: 180,\n    order: 3\n  }]);\n  const [goalPose, setGoalPose] = useState(null);\n  const [isMappingActive, setIsMappingActive] = useState(false);\n  const [isPatrolling, setIsPatrolling] = useState(false);\n  const [currentWaypointIndex, setCurrentWaypointIndex] = useState(0);\n\n  // 地圖縮放和拖拽狀態\n  const [mapZoom, setMapZoom] = useState(1.0);\n  const [mapOffset, setMapOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const [lastMousePos, setLastMousePos] = useState({\n    x: 0,\n    y: 0\n  });\n  const [newStationName, setNewStationName] = useState('');\n\n  // UI 狀態\n  const [logs, setLogs] = useState([{\n    time: new Date().toLocaleTimeString(),\n    type: 'info',\n    message: 'TurtleBot3 界面啟動'\n  }]);\n  const mapCanvasRef = useRef(null);\n  const cmdVelRef = useRef(null);\n  const mapSubRef = useRef(null);\n  const odomSubRef = useRef(null);\n  const rosRef = useRef(null);\n  const addLog = useCallback((type, message) => {\n    const time = new Date().toLocaleTimeString();\n    setLogs(prev => [...prev.slice(-9), {\n      time,\n      type,\n      message\n    }]);\n\n    // 同時廣播到其他窗口\n    try {\n      localStorage.setItem('amr_log_broadcast', JSON.stringify({\n        time,\n        type,\n        message,\n        timestamp: Date.now()\n      }));\n    } catch (e) {\n      console.log('無法廣播日誌');\n    }\n  }, []);\n\n  // 廣播機器人狀態到其他窗口\n  const broadcastRobotState = useCallback(() => {\n    try {\n      const robotState = {\n        pose: currentPose,\n        battery: batteryLevel,\n        status: robotStatus,\n        velocities: {\n          linear: linearVel,\n          angular: angularVel\n        },\n        connected: rosConnected,\n        timestamp: Date.now()\n      };\n      localStorage.setItem('amr_robot_state', JSON.stringify(robotState));\n    } catch (e) {\n      console.log('無法廣播機器人狀態');\n    }\n  }, [currentPose, batteryLevel, robotStatus, linearVel, angularVel, rosConnected]);\n\n  // 廣播日誌到其他窗口\n  const broadcastLogs = useCallback(() => {\n    try {\n      localStorage.setItem('amr_logs_state', JSON.stringify({\n        logs: logs,\n        timestamp: Date.now()\n      }));\n    } catch (e) {\n      console.log('無法廣播日誌狀態');\n    }\n  }, [logs]);\n\n  // 當狀態變化時廣播\n  useEffect(() => {\n    broadcastRobotState();\n  }, [broadcastRobotState]);\n  useEffect(() => {\n    broadcastLogs();\n  }, [broadcastLogs]);\n\n  // 繪製地圖\n  const drawMap = useCallback(mapMessage => {\n    const canvas = mapCanvasRef.current;\n    if (!canvas || !mapMessage) return;\n    const ctx = canvas.getContext('2d');\n    const {\n      width,\n      height,\n      resolution,\n      origin\n    } = mapMessage.info;\n    const {\n      data\n    } = mapMessage;\n    if (!data || data.length === 0) return;\n    const displayWidth = canvas.clientWidth || 800;\n    const displayHeight = canvas.clientHeight || 400;\n    canvas.width = displayWidth;\n    canvas.height = displayHeight;\n    ctx.fillStyle = '#374151';\n    ctx.fillRect(0, 0, displayWidth, displayHeight);\n    const baseScaleX = displayWidth / width;\n    const baseScaleY = displayHeight / height;\n    const baseScale = Math.min(baseScaleX, baseScaleY) * 0.8;\n    const finalScale = baseScale * mapZoom;\n    const centerX = displayWidth / 2;\n    const centerY = displayHeight / 2;\n    const offsetX = centerX - width * finalScale / 2 + mapOffset.x;\n    const offsetY = centerY - height * finalScale / 2 + mapOffset.y;\n\n    // 繪製地圖數據\n    for (let y = 0; y < height; y += 2) {\n      for (let x = 0; x < width; x += 2) {\n        const dataIndex = y * width + x;\n        const value = data[dataIndex];\n        if (value === -1) continue;\n        let color;\n        if (value >= 0 && value < 25) {\n          color = '#ffffff';\n        } else if (value >= 65) {\n          color = '#000000';\n        } else {\n          color = '#d1d5db';\n        }\n        const pixelX = offsetX + x * finalScale;\n        const pixelY = offsetY + y * finalScale;\n        if (pixelX >= 0 && pixelX < displayWidth && pixelY >= 0 && pixelY < displayHeight) {\n          ctx.fillStyle = color;\n          ctx.fillRect(pixelX, pixelY, Math.ceil(finalScale * 2), Math.ceil(finalScale * 2));\n        }\n      }\n    }\n\n    // 繪製站點\n    stations.forEach(station => {\n      const stationX = offsetX + station.x * finalScale;\n      const stationY = offsetY + station.y * finalScale;\n      ctx.fillStyle = station.type === 'charging' ? '#22c55e' : '#3b82f6';\n      ctx.beginPath();\n      ctx.arc(stationX, stationY, 8 * mapZoom, 0, 2 * Math.PI);\n      ctx.fill();\n    });\n\n    // 繪製航點和路徑\n    if (waypoints.length > 1) {\n      ctx.strokeStyle = '#10b981';\n      ctx.lineWidth = 2;\n      ctx.setLineDash([5, 5]);\n      for (let i = 0; i < waypoints.length; i++) {\n        const current = waypoints[i];\n        const next = waypoints[(i + 1) % waypoints.length];\n        const currentX = offsetX + current.x * finalScale;\n        const currentY = offsetY + current.y * finalScale;\n        const nextX = offsetX + next.x * finalScale;\n        const nextY = offsetY + next.y * finalScale;\n        ctx.beginPath();\n        ctx.moveTo(currentX, currentY);\n        ctx.lineTo(nextX, nextY);\n        ctx.stroke();\n      }\n      ctx.setLineDash([]);\n    }\n    waypoints.forEach((waypoint, index) => {\n      const wpX = offsetX + waypoint.x * finalScale;\n      const wpY = offsetY + waypoint.y * finalScale;\n      ctx.fillStyle = index === currentWaypointIndex && isPatrolling ? '#fbbf24' : '#10b981';\n      ctx.beginPath();\n      ctx.arc(wpX, wpY, 6 * mapZoom, 0, 2 * Math.PI);\n      ctx.fill();\n      ctx.fillStyle = 'white';\n      ctx.font = `${10 * mapZoom}px Arial`;\n      ctx.textAlign = 'center';\n      ctx.fillText(waypoint.order.toString(), wpX, wpY + 3);\n    });\n\n    // 繪製機器人\n    if (currentPose && currentPose.x !== undefined) {\n      const robotWorldX = parseFloat(currentPose.x);\n      const robotWorldY = parseFloat(currentPose.y);\n      const robotMapX = (robotWorldX - origin.position.x) / resolution;\n      const robotMapY = height - (robotWorldY - origin.position.y) / resolution;\n      const robotDisplayX = offsetX + robotMapX * finalScale;\n      const robotDisplayY = offsetY + robotMapY * finalScale;\n      if (robotDisplayX >= -50 && robotDisplayX <= displayWidth + 50 && robotDisplayY >= -50 && robotDisplayY <= displayHeight + 50) {\n        ctx.fillStyle = '#3b82f6';\n        ctx.strokeStyle = '#1e40af';\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n        ctx.arc(robotDisplayX, robotDisplayY, 8 * mapZoom, 0, 2 * Math.PI);\n        ctx.fill();\n        ctx.stroke();\n        const theta = parseFloat(currentPose.theta) * Math.PI / 180;\n        const arrowLength = 20 * mapZoom;\n        const arrowX = robotDisplayX + Math.cos(theta) * arrowLength;\n        const arrowY = robotDisplayY - Math.sin(theta) * arrowLength;\n        ctx.strokeStyle = '#1d4ed8';\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        ctx.moveTo(robotDisplayX, robotDisplayY);\n        ctx.lineTo(arrowX, arrowY);\n        ctx.stroke();\n        ctx.strokeStyle = '#10b981';\n        ctx.lineWidth = 2;\n        ctx.setLineDash([5, 5]);\n        ctx.beginPath();\n        ctx.arc(robotDisplayX, robotDisplayY, 40 * mapZoom, 0, 2 * Math.PI);\n        ctx.stroke();\n        ctx.setLineDash([]);\n      }\n    }\n\n    // 繪製目標位置\n    if (goalPose) {\n      const goalMapX = (goalPose.x - origin.position.x) / resolution;\n      const goalMapY = height - (goalPose.y - origin.position.y) / resolution;\n      const goalDisplayX = offsetX + goalMapX * finalScale;\n      const goalDisplayY = offsetY + goalMapY * finalScale;\n      ctx.fillStyle = '#ef4444';\n      ctx.beginPath();\n      ctx.arc(goalDisplayX, goalDisplayY, 6 * mapZoom, 0, 2 * Math.PI);\n      ctx.fill();\n    }\n  }, [currentPose, goalPose, mapZoom, mapOffset, stations, waypoints, currentWaypointIndex, isPatrolling]);\n\n  // ROS 設定\n  const setupRosTopics = useCallback(rosInstance => {\n    try {\n      cmdVelRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/cmd_vel',\n        messageType: 'geometry_msgs/Twist'\n      });\n      odomSubRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/odom',\n        messageType: 'nav_msgs/Odometry'\n      });\n      odomSubRef.current.subscribe(message => {\n        const {\n          position,\n          orientation\n        } = message.pose.pose;\n        const {\n          linear,\n          angular\n        } = message.twist.twist;\n        const theta = 2 * Math.atan2(orientation.z, orientation.w);\n        setCurrentPose({\n          x: parseFloat(position.x.toFixed(3)),\n          y: parseFloat(position.y.toFixed(3)),\n          theta: (theta * 180 / Math.PI).toFixed(1)\n        });\n        setLinearVel(linear.x.toFixed(2));\n        setAngularVel(angular.z.toFixed(2));\n      });\n      mapSubRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/map',\n        messageType: 'nav_msgs/OccupancyGrid'\n      });\n      addLog('info', '正在訂閱地圖話題 /map...');\n      mapSubRef.current.subscribe(message => {\n        console.log('🗺️ 收到地圖數據!', {\n          width: message.info.width,\n          height: message.info.height,\n          resolution: message.info.resolution,\n          dataLength: message.data ? message.data.length : 0\n        });\n        if (message.data && message.data.length > 0) {\n          setMapData(message);\n          setTimeout(() => drawMap(message), 100);\n          addLog('success', `地圖更新: ${message.info.width}x${message.info.height}`);\n        }\n      });\n      const batterySimulation = setInterval(() => {\n        setBatteryLevel(prev => Math.max(20, prev - 0.1));\n      }, 10000);\n      rosInstance.batterySimulation = batterySimulation;\n      addLog('success', 'ROS 話題設置完成');\n    } catch (error) {\n      addLog('error', `話題設置失敗: ${error.message}`);\n    }\n  }, [addLog, drawMap]);\n\n  // ROS 初始化 - 修復無限循環問題\n  useEffect(() => {\n    if (window.ROSLIB) {\n      addLog('success', 'ROSLIB 已成功加載');\n      console.log('✅ ROSLIB 已成功加載');\n    } else {\n      addLog('warning', 'ROSLIB 未加載，使用模擬模式');\n      console.log('❌ ROSLIB 未加載');\n      return; // 如果沒有 ROSLIB 就不繼續\n    }\n    let reconnectTimer = null;\n    let connectionAttempted = false; // 防止重複連接\n\n    const initAndSetupROS = () => {\n      if (connectionAttempted) {\n        console.log('⚠️ 已嘗試過連接，跳過重複嘗試');\n        return;\n      }\n      try {\n        connectionAttempted = true;\n        console.log('🔄 開始初始化 ROS 連接...');\n        if (reconnectTimer) {\n          clearTimeout(reconnectTimer);\n          reconnectTimer = null;\n        }\n        if (rosRef.current) {\n          try {\n            rosRef.current.close();\n            console.log('🔒 關閉舊連接');\n          } catch (e) {\n            console.log('關閉舊連接時發生錯誤:', e);\n          }\n        }\n        console.log('🌐 創建新的 ROS 實例:', rosUrl);\n        const rosInstance = new ROSLIB.Ros({\n          url: rosUrl\n        });\n\n        // 設置連接超時\n        const timeoutId = setTimeout(() => {\n          console.log('⏰ 連接超時 (10秒)');\n          setRosConnected(false);\n          setRobotStatus('連接超時');\n          addLog('error', '連接超時，請檢查 rosbridge 是否運行');\n          connectionAttempted = false; // 允許重新嘗試\n        }, 10000);\n\n        // 設置事件監聽器\n        rosInstance.on('connection', function () {\n          clearTimeout(timeoutId);\n          console.log('✅ ROS 連接成功!');\n          setRosConnected(true);\n          setRobotStatus('已連接');\n          addLog('success', 'ROS 連接成功');\n          setTimeout(() => {\n            console.log('🔧 開始設置 ROS 話題...');\n            setupRosTopics(rosInstance);\n          }, 1000);\n        });\n        rosInstance.on('error', function (error) {\n          clearTimeout(timeoutId);\n          console.error('❌ ROS 連接錯誤:', error);\n          setRosConnected(false);\n          setRobotStatus('連接錯誤');\n          addLog('error', 'ROS 連接錯誤');\n          connectionAttempted = false; // 允許重新嘗試\n        });\n        rosInstance.on('close', function () {\n          clearTimeout(timeoutId);\n          console.log('⚠️ ROS 連接關閉');\n          setRosConnected(false);\n          setRobotStatus('連接斷開');\n          addLog('warning', 'ROS 連接斷開');\n          connectionAttempted = false; // 允許重新嘗試\n        });\n        console.log('🔌 開始嘗試連接...');\n        rosRef.current = rosInstance;\n        console.log('📝 ROS 實例已保存到 ref');\n      } catch (error) {\n        console.error('💥 初始化失敗:', error);\n        addLog('error', `初始化失敗: ${error.message}`);\n        connectionAttempted = false; // 允許重新嘗試\n      }\n    };\n    console.log('🚀 啟動 ROS 初始化...');\n    initAndSetupROS();\n    return () => {\n      console.log('🧹 清理 ROS 連接...');\n      connectionAttempted = true; // 防止清理後再次嘗試\n      if (reconnectTimer) {\n        clearTimeout(reconnectTimer);\n      }\n      if (rosRef.current) {\n        try {\n          rosRef.current.close();\n        } catch (e) {\n          console.log('清理連接時發生錯誤:', e);\n        }\n      }\n    };\n  }, []); // 移除依賴，只在組件首次載入時執行\n\n  // 控制函數\n  const publishCmdVel = useCallback((linear, angular) => {\n    if (!rosConnected || !cmdVelRef.current) return;\n    const twist = new ROSLIB.Message({\n      linear: {\n        x: linear,\n        y: 0,\n        z: 0\n      },\n      angular: {\n        x: 0,\n        y: 0,\n        z: angular\n      }\n    });\n    cmdVelRef.current.publish(twist);\n  }, [rosConnected]);\n  const stopRobot = useCallback(() => {\n    publishCmdVel(0, 0);\n    setIsPatrolling(false);\n    addLog('warning', '機器人停止');\n  }, [publishCmdVel, addLog]);\n  const moveRobot = useCallback(direction => {\n    if (!rosConnected) {\n      addLog('error', '請先連接 ROS');\n      return;\n    }\n    let linear = 0,\n      angular = 0;\n    switch (direction) {\n      case 'forward':\n        linear = speed;\n        break;\n      case 'backward':\n        linear = -speed;\n        break;\n      case 'left':\n        angular = angularSpeed;\n        break;\n      case 'right':\n        angular = -angularSpeed;\n        break;\n      case 'rotate_left':\n        angular = angularSpeed;\n        break;\n      case 'rotate_right':\n        angular = -angularSpeed;\n        break;\n      default:\n        break;\n    }\n    publishCmdVel(linear, angular);\n    addLog('info', `移動指令: 線速度=${linear.toFixed(2)}, 角速度=${angular.toFixed(2)}`);\n  }, [rosConnected, speed, angularSpeed, publishCmdVel, addLog]);\n\n  // 地圖交互\n  const handleMapWheel = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    const delta = event.deltaY > 0 ? 0.9 : 1.1;\n    const newZoom = Math.max(0.5, Math.min(5.0, mapZoom * delta));\n    setMapZoom(newZoom);\n    if (mapData) setTimeout(() => drawMap(mapData), 10);\n  };\n  const handleMapMouseDown = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsDragging(true);\n    setLastMousePos({\n      x: event.clientX,\n      y: event.clientY\n    });\n  };\n  const handleMapMouseMove = event => {\n    if (!isDragging) return;\n    const deltaX = event.clientX - lastMousePos.x;\n    const deltaY = event.clientY - lastMousePos.y;\n    setMapOffset(prev => ({\n      x: prev.x + deltaX,\n      y: prev.y + deltaY\n    }));\n    setLastMousePos({\n      x: event.clientX,\n      y: event.clientY\n    });\n    if (mapData) drawMap(mapData);\n  };\n  const handleMapMouseUp = () => {\n    setIsDragging(false);\n  };\n  const resetMapView = () => {\n    setMapZoom(1.0);\n    setMapOffset({\n      x: 0,\n      y: 0\n    });\n    if (mapData) setTimeout(() => drawMap(mapData), 10);\n  };\n\n  // 地圖點擊處理\n  const handleMapClick = event => {\n    if (!mapData) return;\n    const canvas = mapCanvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    if (currentMode === 'mapping') {\n      if (newStationName.trim()) {\n        const newStation = {\n          id: Date.now(),\n          name: newStationName,\n          x: x,\n          y: y,\n          type: 'work',\n          color: 'bg-blue-500'\n        };\n        setStations(prev => [...prev, newStation]);\n        setNewStationName('');\n        addLog('success', `新增站點: ${newStation.name}`);\n      }\n    } else if (currentMode === 'waypoints') {\n      const newWaypoint = {\n        id: Date.now(),\n        x: x,\n        y: y,\n        order: waypoints.length + 1\n      };\n      setWaypoints(prev => [...prev, newWaypoint]);\n      addLog('success', `新增航點 ${newWaypoint.order}`);\n    } else if (currentMode === 'navigation') {\n      const worldX = x * mapData.info.resolution + mapData.info.origin.position.x;\n      const worldY = (canvas.height - y) * mapData.info.resolution + mapData.info.origin.position.y;\n      setGoalPose({\n        x: worldX,\n        y: worldY\n      });\n      addLog('info', `設置導航目標: (${worldX.toFixed(2)}, ${worldY.toFixed(2)})`);\n    }\n  };\n  const initROS = () => {\n    addLog('info', '手動重新連接 ROS...');\n    console.log('👆 用戶手動重新連接');\n\n    // 強制重新載入頁面來重置連接\n    window.location.reload();\n  };\n  const getBatteryColor = () => {\n    if (batteryLevel > 60) return 'text-green-400';\n    if (batteryLevel > 30) return 'text-yellow-400';\n    return 'text-red-400';\n  };\n  const getStatusColor = () => {\n    if (robotStatus.includes('移動') || robotStatus.includes('導航') || robotStatus.includes('巡邏')) return 'text-blue-400';\n    if (robotStatus.includes('已到達') || robotStatus.includes('已連接')) return 'text-green-400';\n    if (robotStatus.includes('停止') || robotStatus.includes('錯誤')) return 'text-red-400';\n    if (robotStatus.includes('建圖')) return 'text-purple-400';\n    return 'text-gray-400';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-6 overflow-hidden\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-full max-w-7xl mx-auto flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-4xl font-bold text-white mb-2\",\n          children: \"AMR \\u667A\\u80FD\\u5C0E\\u822A\\u7CFB\\u7D71\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-300\",\n          children: \"\\u5EFA\\u5716 \\xB7 \\u5C0E\\u822A \\xB7 \\u5DE1\\u908F\\u63A7\\u5236\\u53F0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-4 mb-6 border border-white/20\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-300 mb-2\",\n              children: \"ROS Bridge URL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: rosUrl,\n              onChange: e => setRosUrl(e.target.value),\n              className: \"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-gray-400\",\n              placeholder: \"ws://localhost:9090\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: initROS,\n            disabled: rosConnected,\n            className: \"px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\",\n            children: rosConnected ? '已連接' : '連接 ROS'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 685,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.open('/monitor', '_blank'),\n            className: \"px-6 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-all\",\n            children: \"\\u958B\\u555F\\u76E3\\u63A7\\u9801\\u9762\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 692,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 673,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center gap-2 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentMode('teleop'),\n          className: `px-4 py-2 rounded-lg font-medium transition-all ${currentMode === 'teleop' ? 'bg-blue-500 text-white' : 'bg-white/10 text-gray-300'}`,\n          children: \"\\u9059\\u63A7\\u6A21\\u5F0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 703,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentMode('mapping'),\n          className: `px-4 py-2 rounded-lg font-medium transition-all ${currentMode === 'mapping' ? 'bg-purple-500 text-white' : 'bg-white/10 text-gray-300'}`,\n          children: \"\\u5EFA\\u5716\\u6A21\\u5F0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 711,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentMode('waypoints'),\n          className: `px-4 py-2 rounded-lg font-medium transition-all ${currentMode === 'waypoints' ? 'bg-green-500 text-white' : 'bg-white/10 text-gray-300'}`,\n          children: \"\\u822A\\u9EDE\\u6A21\\u5F0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 719,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentMode('navigation'),\n          className: `px-4 py-2 rounded-lg font-medium transition-all ${currentMode === 'navigation' ? 'bg-orange-500 text-white' : 'bg-white/10 text-gray-300'}`,\n          children: \"\\u5C0E\\u822A\\u6A21\\u5F0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 727,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 702,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [rosConnected ? /*#__PURE__*/_jsxDEV(Wifi, {\n              className: \"w-8 h-8 text-green-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 31\n            }, this) : /*#__PURE__*/_jsxDEV(WifiOff, {\n              className: \"w-8 h-8 text-red-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 77\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"ROS \\u72C0\\u614B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 743,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: `font-semibold ${getStatusColor()}`,\n                children: robotStatus\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 744,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 742,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 740,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(Battery, {\n              className: `w-8 h-8 ${getBatteryColor()}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 751,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"\\u96FB\\u91CF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 753,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: `font-semibold ${getBatteryColor()}`,\n                children: [batteryLevel.toFixed(1), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 754,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 752,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 750,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 749,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(MapPin, {\n              className: \"w-8 h-8 text-purple-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 761,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"\\u4F4D\\u7F6E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 763,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-semibold text-purple-400\",\n                children: [\"(\", currentPose.x, \", \", currentPose.y, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 764,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 762,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 760,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(Activity, {\n              className: \"w-8 h-8 text-orange-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 773,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"\\u822A\\u9EDE\\u6578\\u91CF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 775,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-semibold text-orange-400\",\n                children: [waypoints.length, \" \\u500B\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 776,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 774,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 772,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 771,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6 min-h-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2 flex flex-col min-h-0\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 flex-1 flex flex-col min-h-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-xl font-semibold text-white flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Map, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 789,\n                  columnNumber: 19\n                }, this), \"\\u667A\\u80FD\\u5730\\u5716\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 788,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: resetMapView,\n                  className: \"px-3 py-1 bg-blue-500/80 hover:bg-blue-600/80 text-white rounded text-sm transition-all\",\n                  title: \"\\u91CD\\u7F6E\\u8996\\u5716\",\n                  children: \"\\uD83D\\uDD04 \\u91CD\\u7F6E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 793,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"px-3 py-1 bg-black/60 text-white rounded text-sm\",\n                  children: [(mapZoom * 100).toFixed(0), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 800,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 792,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 787,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 bg-black/30 rounded-lg p-4 relative min-h-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n                ref: mapCanvasRef,\n                onClick: handleMapClick,\n                onWheel: handleMapWheel,\n                onMouseDown: handleMapMouseDown,\n                onMouseMove: handleMapMouseMove,\n                onMouseUp: handleMapMouseUp,\n                onMouseLeave: handleMapMouseUp,\n                className: \"w-full h-full bg-gray-800 rounded cursor-move select-none\",\n                style: {\n                  touchAction: 'none'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 807,\n                columnNumber: 17\n              }, this), !mapData && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-0 flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-400 text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(MapPin, {\n                    className: \"w-12 h-12 mx-auto mb-2 opacity-50\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 822,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-lg mb-2\",\n                    children: \"\\u7B49\\u5F85\\u5730\\u5716\\u6578\\u64DA...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 823,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm\",\n                    children: \"\\u8ACB\\u78BA\\u4FDD SLAM \\u7BC0\\u9EDE\\u6B63\\u5728\\u904B\\u884C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 824,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 821,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 820,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 806,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between text-xs text-gray-400 mt-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\uD83D\\uDD35 \\u6A5F\\u5668\\u4EBA \\uD83D\\uDD34 \\u76EE\\u6A19 \\uD83D\\uDFE2 \\u822A\\u9EDE \\uD83C\\uDFE0 \\u5145\\u96FB\\u7AD9 \\uD83D\\uDEA9 \\u5DE5\\u4F5C\\u7AD9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 831,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u6EFE\\u8F2A\\u7E2E\\u653E \\xB7 \\u62D6\\u62FD\\u79FB\\u52D5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 832,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 830,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 786,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 785,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6 overflow-y-auto\",\n          children: [currentMode === 'teleop' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold text-white mb-4\",\n              children: \"\\u9375\\u76E4\\u63A7\\u5236\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 842,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-3 gap-2 max-w-48 mx-auto mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 845,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onMouseDown: () => moveRobot('forward'),\n                onMouseUp: stopRobot,\n                disabled: !rosConnected,\n                className: \"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\",\n                children: /*#__PURE__*/_jsxDEV(ArrowUp, {\n                  className: \"w-6 h-6 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 852,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 846,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 854,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onMouseDown: () => moveRobot('left'),\n                onMouseUp: stopRobot,\n                disabled: !rosConnected,\n                className: \"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\",\n                children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                  className: \"w-6 h-6 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 862,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 856,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: stopRobot,\n                className: \"p-3 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-all\",\n                children: /*#__PURE__*/_jsxDEV(Square, {\n                  className: \"w-6 h-6 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 868,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 864,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onMouseDown: () => moveRobot('right'),\n                onMouseUp: stopRobot,\n                disabled: !rosConnected,\n                className: \"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\",\n                children: /*#__PURE__*/_jsxDEV(ArrowRight, {\n                  className: \"w-6 h-6 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 876,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 870,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 879,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onMouseDown: () => moveRobot('backward'),\n                onMouseUp: stopRobot,\n                disabled: !rosConnected,\n                className: \"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\",\n                children: /*#__PURE__*/_jsxDEV(ArrowDown, {\n                  className: \"w-6 h-6 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 886,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 880,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 888,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 844,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onMouseDown: () => moveRobot('rotate_left'),\n                onMouseUp: stopRobot,\n                disabled: !rosConnected,\n                className: \"flex-1 flex items-center justify-center gap-2 p-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 898,\n                  columnNumber: 21\n                }, this), \"\\u5DE6\\u8F49\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 892,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onMouseDown: () => moveRobot('rotate_right'),\n                onMouseUp: stopRobot,\n                disabled: !rosConnected,\n                className: \"flex-1 flex items-center justify-center gap-2 p-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(RotateCw, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 907,\n                  columnNumber: 21\n                }, this), \"\\u53F3\\u8F49\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 901,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 891,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-300 mb-2\",\n                  children: [\"\\u7DDA\\u901F\\u5EA6: \", speed.toFixed(1), \" m/s\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 914,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"range\",\n                  min: \"0.1\",\n                  max: \"1.0\",\n                  step: \"0.1\",\n                  value: speed,\n                  onChange: e => setSpeed(parseFloat(e.target.value)),\n                  className: \"w-full h-2 bg-white/20 rounded-lg appearance-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 917,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 913,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-300 mb-2\",\n                  children: [\"\\u89D2\\u901F\\u5EA6: \", angularSpeed.toFixed(1), \" rad/s\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 929,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"range\",\n                  min: \"0.1\",\n                  max: \"2.0\",\n                  step: \"0.1\",\n                  value: angularSpeed,\n                  onChange: e => setAngularSpeed(parseFloat(e.target.value)),\n                  className: \"w-full h-2 bg-white/20 rounded-lg appearance-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 932,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 928,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 912,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 841,\n            columnNumber: 15\n          }, this), currentMode === 'mapping' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold text-white mb-4\",\n              children: \"\\u5EFA\\u5716\\u5DE5\\u5177\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 949,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"\\u8F38\\u5165\\u7AD9\\u9EDE\\u540D\\u7A31\",\n                value: newStationName,\n                onChange: e => setNewStationName(e.target.value),\n                className: \"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 952,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"\\u9EDE\\u64CA\\u5730\\u5716\\u65B0\\u589E\\u7AD9\\u9EDE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 959,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setIsMappingActive(!isMappingActive),\n                disabled: !rosConnected,\n                className: `w-full flex items-center justify-center gap-2 px-4 py-3 ${isMappingActive ? 'bg-red-500 hover:bg-red-600' : 'bg-purple-500 hover:bg-purple-600'} disabled:bg-gray-600 text-white rounded-lg font-medium transition-all`,\n                children: [/*#__PURE__*/_jsxDEV(Map, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 968,\n                  columnNumber: 21\n                }, this), isMappingActive ? '停止建圖' : '開始建圖']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 961,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 951,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 948,\n            columnNumber: 15\n          }, this), currentMode === 'waypoints' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold text-white mb-4\",\n              children: \"\\u822A\\u9EDE\\u7BA1\\u7406\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 978,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  if (waypoints.length === 0) {\n                    addLog('error', '沒有設定航點，無法開始巡邏');\n                    return;\n                  }\n                  setIsPatrolling(!isPatrolling);\n                  if (!isPatrolling) {\n                    setCurrentWaypointIndex(0);\n                    addLog('info', '開始自動巡邏');\n                  } else {\n                    addLog('info', '停止巡邏');\n                  }\n                },\n                disabled: waypoints.length === 0 || !rosConnected,\n                className: \"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg font-medium transition-all\",\n                children: [isPatrolling ? /*#__PURE__*/_jsxDEV(Pause, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 998,\n                  columnNumber: 37\n                }, this) : /*#__PURE__*/_jsxDEV(Play, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 998,\n                  columnNumber: 69\n                }, this), isPatrolling ? '停止巡邏' : '開始巡邏']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 981,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"\\u9EDE\\u64CA\\u5730\\u5716\\u65B0\\u589E\\u822A\\u9EDE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1001,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 980,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 977,\n            columnNumber: 15\n          }, this), currentMode === 'navigation' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold text-white mb-4\",\n              children: \"\\u81EA\\u4E3B\\u5C0E\\u822A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1009,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: [goalPose && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-black/20 rounded-lg p-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-300\",\n                  children: \"\\u76EE\\u6A19\\u4F4D\\u7F6E:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1014,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-white\",\n                  children: [\"(\", goalPose.x.toFixed(2), \", \", goalPose.y.toFixed(2), \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1015,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1013,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: stopRobot,\n                disabled: !rosConnected,\n                className: \"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white rounded-lg font-medium transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(Square, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1024,\n                  columnNumber: 21\n                }, this), \"\\u505C\\u6B62\\u5C0E\\u822A\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1019,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"\\u9EDE\\u64CA\\u5730\\u5716\\u8A2D\\u7F6E\\u5C0E\\u822A\\u76EE\\u6A19\\u9EDE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1028,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1011,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1008,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold text-white mb-4\",\n              children: \"\\u7AD9\\u9EDE\\u7BA1\\u7406\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1037,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2 max-h-40 overflow-y-auto\",\n              children: stations.map(station => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between p-2 bg-white/10 rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `w-3 h-3 ${station.color} rounded`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1043,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-white text-sm\",\n                    children: station.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1044,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1042,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    disabled: !rosConnected,\n                    className: \"p-1 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded text-xs transition-all\",\n                    children: \"\\u524D\\u5F80\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1047,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setStations(prev => prev.filter(s => s.id !== station.id)),\n                    className: \"p-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs transition-all\",\n                    children: /*#__PURE__*/_jsxDEV(Trash2, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1057,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1053,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1046,\n                  columnNumber: 21\n                }, this)]\n              }, station.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1041,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1039,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1036,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold text-white mb-4\",\n              children: \"\\u5FEB\\u901F\\u52D5\\u4F5C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1067,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  const chargingStation = stations.find(s => s.type === 'charging');\n                  if (chargingStation) {\n                    const worldX = chargingStation.x;\n                    const worldY = chargingStation.y;\n                    setGoalPose({\n                      x: worldX,\n                      y: worldY\n                    });\n                    addLog('info', '導航至充電站');\n                  }\n                },\n                disabled: !rosConnected || !stations.find(s => s.type === 'charging'),\n                className: \"flex items-center justify-center gap-2 px-3 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(Home, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1083,\n                  columnNumber: 19\n                }, this), \"\\u56DE\\u5145\\u96FB\\u7AD9\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1070,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: stopRobot,\n                disabled: !rosConnected,\n                className: \"flex items-center justify-center gap-2 px-3 py-2 bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(Square, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1091,\n                  columnNumber: 19\n                }, this), \"\\u7DCA\\u6025\\u505C\\u6B62\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1086,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => window.open('http://localhost:8080', '_blank'),\n                className: \"flex items-center justify-center gap-2 px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(Camera, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1098,\n                  columnNumber: 19\n                }, this), \"\\u651D\\u5F71\\u6A5F\\u8996\\u5716\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1094,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1069,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1066,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 838,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 783,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 665,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 664,\n    columnNumber: 5\n  }, this);\n};\n_s(TurtleBotInterface, \"AekmtirPYjZy5kvHq15le938vWg=\");\n_c = TurtleBotInterface;\nexport default TurtleBotInterface;\nvar _c;\n$RefreshReg$(_c, \"TurtleBotInterface\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Square","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Battery","Camera","MapPin","Activity","Map","Home","Play","Pause","RotateCw","RotateCcw","Wifi","WifiOff","Trash2","jsxDEV","_jsxDEV","ROSLIB","window","console","warn","Ros","constructor","isConnected","connect","log","setTimeout","onConnection","close","on","Topic","publish","subscribe","Service","callService","Message","data","Object","assign","TurtleBotInterface","_s","rosConnected","setRosConnected","rosUrl","setRosUrl","robotStatus","setRobotStatus","batteryLevel","setBatteryLevel","currentPose","setCurrentPose","x","y","theta","linearVel","setLinearVel","angularVel","setAngularVel","speed","setSpeed","angularSpeed","setAngularSpeed","currentMode","setCurrentMode","mapData","setMapData","stations","setStations","id","name","type","color","waypoints","setWaypoints","order","goalPose","setGoalPose","isMappingActive","setIsMappingActive","isPatrolling","setIsPatrolling","currentWaypointIndex","setCurrentWaypointIndex","mapZoom","setMapZoom","mapOffset","setMapOffset","isDragging","setIsDragging","lastMousePos","setLastMousePos","newStationName","setNewStationName","logs","setLogs","time","Date","toLocaleTimeString","message","mapCanvasRef","cmdVelRef","mapSubRef","odomSubRef","rosRef","addLog","prev","slice","localStorage","setItem","JSON","stringify","timestamp","now","e","broadcastRobotState","robotState","pose","battery","status","velocities","linear","angular","connected","broadcastLogs","drawMap","mapMessage","canvas","current","ctx","getContext","width","height","resolution","origin","info","length","displayWidth","clientWidth","displayHeight","clientHeight","fillStyle","fillRect","baseScaleX","baseScaleY","baseScale","Math","min","finalScale","centerX","centerY","offsetX","offsetY","dataIndex","value","pixelX","pixelY","ceil","forEach","station","stationX","stationY","beginPath","arc","PI","fill","strokeStyle","lineWidth","setLineDash","i","next","currentX","currentY","nextX","nextY","moveTo","lineTo","stroke","waypoint","index","wpX","wpY","font","textAlign","fillText","toString","undefined","robotWorldX","parseFloat","robotWorldY","robotMapX","position","robotMapY","robotDisplayX","robotDisplayY","arrowLength","arrowX","cos","arrowY","sin","goalMapX","goalMapY","goalDisplayX","goalDisplayY","setupRosTopics","rosInstance","ros","messageType","orientation","twist","atan2","z","w","toFixed","dataLength","batterySimulation","setInterval","max","error","reconnectTimer","connectionAttempted","initAndSetupROS","clearTimeout","url","timeoutId","publishCmdVel","stopRobot","moveRobot","direction","handleMapWheel","event","preventDefault","stopPropagation","delta","deltaY","newZoom","handleMapMouseDown","clientX","clientY","handleMapMouseMove","deltaX","handleMapMouseUp","resetMapView","handleMapClick","rect","getBoundingClientRect","left","top","trim","newStation","newWaypoint","worldX","worldY","initROS","location","reload","getBatteryColor","getStatusColor","includes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","target","placeholder","onClick","disabled","open","title","ref","onWheel","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","style","touchAction","step","map","filter","s","chargingStation","find","_c","$RefreshReg$"],"sources":["/home/leo/amr-developer-interface/src/components/AMRDeveloperInterface.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { \n  Square, \n  ArrowUp, \n  ArrowDown, \n  ArrowLeft, \n  ArrowRight,\n  Battery,\n  Camera,\n  MapPin,\n  Activity,\n  Map,\n  Home,\n  Play,\n  Pause,\n  RotateCw,\n  RotateCcw,\n  Wifi,\n  WifiOff,\n  Trash2\n} from 'lucide-react';\n\n// 從全局變量獲取 ROSLIB\nconst ROSLIB = window.ROSLIB || (() => {\n  console.warn('ROSLIB 未加載，使用模擬模式');\n  return {\n    Ros: class {\n      constructor() {\n        this.isConnected = false;\n      }\n      connect() {\n        console.log('模擬 ROS 連接');\n        setTimeout(() => {\n          this.isConnected = true;\n          if (this.onConnection) this.onConnection();\n        }, 1000);\n      }\n      close() {\n        this.isConnected = false;\n      }\n      on() {}\n    },\n    Topic: class {\n      publish() {}\n      subscribe() {}\n    },\n    Service: class {\n      callService() {}\n    },\n    Message: class {\n      constructor(data) {\n        Object.assign(this, data);\n      }\n    }\n  };\n})();\n\nconst TurtleBotInterface = () => {\n  // ROS 連接狀態\n  const [rosConnected, setRosConnected] = useState(false);\n  const [rosUrl, setRosUrl] = useState('ws://localhost:9090');\n  \n  // 機器人狀態\n  const [robotStatus, setRobotStatus] = useState('未連接');\n  const [batteryLevel, setBatteryLevel] = useState(85);\n  const [currentPose, setCurrentPose] = useState({ x: 0, y: 0, theta: 0 });\n  const [linearVel, setLinearVel] = useState(0);\n  const [angularVel, setAngularVel] = useState(0);\n  const [speed, setSpeed] = useState(0.2);\n  const [angularSpeed, setAngularSpeed] = useState(0.5);\n  \n  // 地圖和導航\n  const [currentMode, setCurrentMode] = useState('teleop');\n  const [mapData, setMapData] = useState(null);\n  const [stations, setStations] = useState([\n    { id: 1, name: '充電站', x: 50, y: 50, type: 'charging', color: 'bg-green-500' },\n    { id: 2, name: '工作站A', x: 300, y: 80, type: 'work', color: 'bg-blue-500' },\n    { id: 3, name: '工作站B', x: 350, y: 200, type: 'work', color: 'bg-blue-500' }\n  ]);\n  const [waypoints, setWaypoints] = useState([\n    { id: 1, x: 100, y: 75, order: 1 },\n    { id: 2, x: 250, y: 120, order: 2 },\n    { id: 3, x: 320, y: 180, order: 3 }\n  ]);\n  const [goalPose, setGoalPose] = useState(null);\n  const [isMappingActive, setIsMappingActive] = useState(false);\n  const [isPatrolling, setIsPatrolling] = useState(false);\n  const [currentWaypointIndex, setCurrentWaypointIndex] = useState(0);\n  \n  // 地圖縮放和拖拽狀態\n  const [mapZoom, setMapZoom] = useState(1.0);\n  const [mapOffset, setMapOffset] = useState({ x: 0, y: 0 });\n  const [isDragging, setIsDragging] = useState(false);\n  const [lastMousePos, setLastMousePos] = useState({ x: 0, y: 0 });\n  const [newStationName, setNewStationName] = useState('');\n  \n  // UI 狀態\n  const [logs, setLogs] = useState([\n    { time: new Date().toLocaleTimeString(), type: 'info', message: 'TurtleBot3 界面啟動' }\n  ]);\n  \n  const mapCanvasRef = useRef(null);\n  const cmdVelRef = useRef(null);\n  const mapSubRef = useRef(null);\n  const odomSubRef = useRef(null);\n  const rosRef = useRef(null);\n\n  const addLog = useCallback((type, message) => {\n    const time = new Date().toLocaleTimeString();\n    setLogs(prev => [...prev.slice(-9), { time, type, message }]);\n    \n    // 同時廣播到其他窗口\n    try {\n      localStorage.setItem('amr_log_broadcast', JSON.stringify({\n        time, type, message, timestamp: Date.now()\n      }));\n    } catch (e) {\n      console.log('無法廣播日誌');\n    }\n  }, []);\n\n  // 廣播機器人狀態到其他窗口\n  const broadcastRobotState = useCallback(() => {\n    try {\n      const robotState = {\n        pose: currentPose,\n        battery: batteryLevel,\n        status: robotStatus,\n        velocities: { linear: linearVel, angular: angularVel },\n        connected: rosConnected,\n        timestamp: Date.now()\n      };\n      localStorage.setItem('amr_robot_state', JSON.stringify(robotState));\n    } catch (e) {\n      console.log('無法廣播機器人狀態');\n    }\n  }, [currentPose, batteryLevel, robotStatus, linearVel, angularVel, rosConnected]);\n\n  // 廣播日誌到其他窗口\n  const broadcastLogs = useCallback(() => {\n    try {\n      localStorage.setItem('amr_logs_state', JSON.stringify({\n        logs: logs,\n        timestamp: Date.now()\n      }));\n    } catch (e) {\n      console.log('無法廣播日誌狀態');\n    }\n  }, [logs]);\n\n  // 當狀態變化時廣播\n  useEffect(() => {\n    broadcastRobotState();\n  }, [broadcastRobotState]);\n\n  useEffect(() => {\n    broadcastLogs();\n  }, [broadcastLogs]);\n\n  // 繪製地圖\n  const drawMap = useCallback((mapMessage) => {\n    const canvas = mapCanvasRef.current;\n    if (!canvas || !mapMessage) return;\n\n    const ctx = canvas.getContext('2d');\n    const { width, height, resolution, origin } = mapMessage.info;\n    const { data } = mapMessage;\n    \n    if (!data || data.length === 0) return;\n\n    const displayWidth = canvas.clientWidth || 800;\n    const displayHeight = canvas.clientHeight || 400;\n    canvas.width = displayWidth;\n    canvas.height = displayHeight;\n    \n    ctx.fillStyle = '#374151';\n    ctx.fillRect(0, 0, displayWidth, displayHeight);\n    \n    const baseScaleX = displayWidth / width;\n    const baseScaleY = displayHeight / height;\n    const baseScale = Math.min(baseScaleX, baseScaleY) * 0.8;\n    const finalScale = baseScale * mapZoom;\n    \n    const centerX = displayWidth / 2;\n    const centerY = displayHeight / 2;\n    const offsetX = centerX - (width * finalScale) / 2 + mapOffset.x;\n    const offsetY = centerY - (height * finalScale) / 2 + mapOffset.y;\n    \n    // 繪製地圖數據\n    for (let y = 0; y < height; y += 2) {\n      for (let x = 0; x < width; x += 2) {\n        const dataIndex = y * width + x;\n        const value = data[dataIndex];\n        \n        if (value === -1) continue;\n        \n        let color;\n        if (value >= 0 && value < 25) {\n          color = '#ffffff';\n        } else if (value >= 65) {\n          color = '#000000';\n        } else {\n          color = '#d1d5db';\n        }\n        \n        const pixelX = offsetX + x * finalScale;\n        const pixelY = offsetY + y * finalScale;\n        \n        if (pixelX >= 0 && pixelX < displayWidth && pixelY >= 0 && pixelY < displayHeight) {\n          ctx.fillStyle = color;\n          ctx.fillRect(pixelX, pixelY, Math.ceil(finalScale * 2), Math.ceil(finalScale * 2));\n        }\n      }\n    }\n    \n    // 繪製站點\n    stations.forEach(station => {\n      const stationX = offsetX + station.x * finalScale;\n      const stationY = offsetY + station.y * finalScale;\n      \n      ctx.fillStyle = station.type === 'charging' ? '#22c55e' : '#3b82f6';\n      ctx.beginPath();\n      ctx.arc(stationX, stationY, 8 * mapZoom, 0, 2 * Math.PI);\n      ctx.fill();\n    });\n    \n    // 繪製航點和路徑\n    if (waypoints.length > 1) {\n      ctx.strokeStyle = '#10b981';\n      ctx.lineWidth = 2;\n      ctx.setLineDash([5, 5]);\n      \n      for (let i = 0; i < waypoints.length; i++) {\n        const current = waypoints[i];\n        const next = waypoints[(i + 1) % waypoints.length];\n        \n        const currentX = offsetX + current.x * finalScale;\n        const currentY = offsetY + current.y * finalScale;\n        const nextX = offsetX + next.x * finalScale;\n        const nextY = offsetY + next.y * finalScale;\n        \n        ctx.beginPath();\n        ctx.moveTo(currentX, currentY);\n        ctx.lineTo(nextX, nextY);\n        ctx.stroke();\n      }\n      ctx.setLineDash([]);\n    }\n    \n    waypoints.forEach((waypoint, index) => {\n      const wpX = offsetX + waypoint.x * finalScale;\n      const wpY = offsetY + waypoint.y * finalScale;\n      \n      ctx.fillStyle = index === currentWaypointIndex && isPatrolling ? '#fbbf24' : '#10b981';\n      ctx.beginPath();\n      ctx.arc(wpX, wpY, 6 * mapZoom, 0, 2 * Math.PI);\n      ctx.fill();\n      \n      ctx.fillStyle = 'white';\n      ctx.font = `${10 * mapZoom}px Arial`;\n      ctx.textAlign = 'center';\n      ctx.fillText(waypoint.order.toString(), wpX, wpY + 3);\n    });\n    \n    // 繪製機器人\n    if (currentPose && currentPose.x !== undefined) {\n      const robotWorldX = parseFloat(currentPose.x);\n      const robotWorldY = parseFloat(currentPose.y);\n      \n      const robotMapX = (robotWorldX - origin.position.x) / resolution;\n      const robotMapY = height - (robotWorldY - origin.position.y) / resolution;\n      \n      const robotDisplayX = offsetX + robotMapX * finalScale;\n      const robotDisplayY = offsetY + robotMapY * finalScale;\n      \n      if (robotDisplayX >= -50 && robotDisplayX <= displayWidth + 50 && \n          robotDisplayY >= -50 && robotDisplayY <= displayHeight + 50) {\n        \n        ctx.fillStyle = '#3b82f6';\n        ctx.strokeStyle = '#1e40af';\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n        ctx.arc(robotDisplayX, robotDisplayY, 8 * mapZoom, 0, 2 * Math.PI);\n        ctx.fill();\n        ctx.stroke();\n        \n        const theta = parseFloat(currentPose.theta) * Math.PI / 180;\n        const arrowLength = 20 * mapZoom;\n        const arrowX = robotDisplayX + Math.cos(theta) * arrowLength;\n        const arrowY = robotDisplayY - Math.sin(theta) * arrowLength;\n        \n        ctx.strokeStyle = '#1d4ed8';\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        ctx.moveTo(robotDisplayX, robotDisplayY);\n        ctx.lineTo(arrowX, arrowY);\n        ctx.stroke();\n        \n        ctx.strokeStyle = '#10b981';\n        ctx.lineWidth = 2;\n        ctx.setLineDash([5, 5]);\n        ctx.beginPath();\n        ctx.arc(robotDisplayX, robotDisplayY, 40 * mapZoom, 0, 2 * Math.PI);\n        ctx.stroke();\n        ctx.setLineDash([]);\n      }\n    }\n    \n    // 繪製目標位置\n    if (goalPose) {\n      const goalMapX = (goalPose.x - origin.position.x) / resolution;\n      const goalMapY = height - (goalPose.y - origin.position.y) / resolution;\n      \n      const goalDisplayX = offsetX + goalMapX * finalScale;\n      const goalDisplayY = offsetY + goalMapY * finalScale;\n      \n      ctx.fillStyle = '#ef4444';\n      ctx.beginPath();\n      ctx.arc(goalDisplayX, goalDisplayY, 6 * mapZoom, 0, 2 * Math.PI);\n      ctx.fill();\n    }\n  }, [currentPose, goalPose, mapZoom, mapOffset, stations, waypoints, currentWaypointIndex, isPatrolling]);\n\n  // ROS 設定\n  const setupRosTopics = useCallback((rosInstance) => {\n    try {\n      cmdVelRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/cmd_vel',\n        messageType: 'geometry_msgs/Twist'\n      });\n\n      odomSubRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/odom',\n        messageType: 'nav_msgs/Odometry'\n      });\n\n      odomSubRef.current.subscribe((message) => {\n        const { position, orientation } = message.pose.pose;\n        const { linear, angular } = message.twist.twist;\n        \n        const theta = 2 * Math.atan2(orientation.z, orientation.w);\n        \n        setCurrentPose({\n          x: parseFloat(position.x.toFixed(3)),\n          y: parseFloat(position.y.toFixed(3)),\n          theta: (theta * 180 / Math.PI).toFixed(1)\n        });\n        \n        setLinearVel(linear.x.toFixed(2));\n        setAngularVel(angular.z.toFixed(2));\n      });\n\n      mapSubRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/map',\n        messageType: 'nav_msgs/OccupancyGrid'\n      });\n\n      addLog('info', '正在訂閱地圖話題 /map...');\n      \n      mapSubRef.current.subscribe((message) => {\n        console.log('🗺️ 收到地圖數據!', {\n          width: message.info.width,\n          height: message.info.height,\n          resolution: message.info.resolution,\n          dataLength: message.data ? message.data.length : 0\n        });\n        \n        if (message.data && message.data.length > 0) {\n          setMapData(message);\n          setTimeout(() => drawMap(message), 100);\n          addLog('success', `地圖更新: ${message.info.width}x${message.info.height}`);\n        }\n      });\n\n      const batterySimulation = setInterval(() => {\n        setBatteryLevel(prev => Math.max(20, prev - 0.1));\n      }, 10000);\n\n      rosInstance.batterySimulation = batterySimulation;\n      addLog('success', 'ROS 話題設置完成');\n    } catch (error) {\n      addLog('error', `話題設置失敗: ${error.message}`);\n    }\n  }, [addLog, drawMap]);\n\n  // ROS 初始化 - 修復無限循環問題\n  useEffect(() => {\n    if (window.ROSLIB) {\n      addLog('success', 'ROSLIB 已成功加載');\n      console.log('✅ ROSLIB 已成功加載');\n    } else {\n      addLog('warning', 'ROSLIB 未加載，使用模擬模式');\n      console.log('❌ ROSLIB 未加載');\n      return; // 如果沒有 ROSLIB 就不繼續\n    }\n    \n    let reconnectTimer = null;\n    let connectionAttempted = false; // 防止重複連接\n    \n    const initAndSetupROS = () => {\n      if (connectionAttempted) {\n        console.log('⚠️ 已嘗試過連接，跳過重複嘗試');\n        return;\n      }\n      \n      try {\n        connectionAttempted = true;\n        console.log('🔄 開始初始化 ROS 連接...');\n        \n        if (reconnectTimer) {\n          clearTimeout(reconnectTimer);\n          reconnectTimer = null;\n        }\n        \n        if (rosRef.current) {\n          try {\n            rosRef.current.close();\n            console.log('🔒 關閉舊連接');\n          } catch (e) {\n            console.log('關閉舊連接時發生錯誤:', e);\n          }\n        }\n        \n        console.log('🌐 創建新的 ROS 實例:', rosUrl);\n        const rosInstance = new ROSLIB.Ros({ \n          url: rosUrl\n        });\n\n        // 設置連接超時\n        const timeoutId = setTimeout(() => {\n          console.log('⏰ 連接超時 (10秒)');\n          setRosConnected(false);\n          setRobotStatus('連接超時');\n          addLog('error', '連接超時，請檢查 rosbridge 是否運行');\n          connectionAttempted = false; // 允許重新嘗試\n        }, 10000);\n\n        // 設置事件監聽器\n        rosInstance.on('connection', function() {\n          clearTimeout(timeoutId);\n          console.log('✅ ROS 連接成功!');\n          setRosConnected(true);\n          setRobotStatus('已連接');\n          addLog('success', 'ROS 連接成功');\n          \n          setTimeout(() => {\n            console.log('🔧 開始設置 ROS 話題...');\n            setupRosTopics(rosInstance);\n          }, 1000);\n        });\n\n        rosInstance.on('error', function(error) {\n          clearTimeout(timeoutId);\n          console.error('❌ ROS 連接錯誤:', error);\n          setRosConnected(false);\n          setRobotStatus('連接錯誤');\n          addLog('error', 'ROS 連接錯誤');\n          connectionAttempted = false; // 允許重新嘗試\n        });\n\n        rosInstance.on('close', function() {\n          clearTimeout(timeoutId);\n          console.log('⚠️ ROS 連接關閉');\n          setRosConnected(false);\n          setRobotStatus('連接斷開');\n          addLog('warning', 'ROS 連接斷開');\n          connectionAttempted = false; // 允許重新嘗試\n        });\n\n        console.log('🔌 開始嘗試連接...');\n        rosRef.current = rosInstance;\n        console.log('📝 ROS 實例已保存到 ref');\n        \n      } catch (error) {\n        console.error('💥 初始化失敗:', error);\n        addLog('error', `初始化失敗: ${error.message}`);\n        connectionAttempted = false; // 允許重新嘗試\n      }\n    };\n\n    console.log('🚀 啟動 ROS 初始化...');\n    initAndSetupROS();\n    \n    return () => {\n      console.log('🧹 清理 ROS 連接...');\n      connectionAttempted = true; // 防止清理後再次嘗試\n      if (reconnectTimer) {\n        clearTimeout(reconnectTimer);\n      }\n      if (rosRef.current) {\n        try {\n          rosRef.current.close();\n        } catch (e) {\n          console.log('清理連接時發生錯誤:', e);\n        }\n      }\n    };\n  }, []); // 移除依賴，只在組件首次載入時執行\n\n  // 控制函數\n  const publishCmdVel = useCallback((linear, angular) => {\n    if (!rosConnected || !cmdVelRef.current) return;\n\n    const twist = new ROSLIB.Message({\n      linear: { x: linear, y: 0, z: 0 },\n      angular: { x: 0, y: 0, z: angular }\n    });\n\n    cmdVelRef.current.publish(twist);\n  }, [rosConnected]);\n\n  const stopRobot = useCallback(() => {\n    publishCmdVel(0, 0);\n    setIsPatrolling(false);\n    addLog('warning', '機器人停止');\n  }, [publishCmdVel, addLog]);\n\n  const moveRobot = useCallback((direction) => {\n    if (!rosConnected) {\n      addLog('error', '請先連接 ROS');\n      return;\n    }\n\n    let linear = 0, angular = 0;\n\n    switch (direction) {\n      case 'forward':\n        linear = speed;\n        break;\n      case 'backward':\n        linear = -speed;\n        break;\n      case 'left':\n        angular = angularSpeed;\n        break;\n      case 'right':\n        angular = -angularSpeed;\n        break;\n      case 'rotate_left':\n        angular = angularSpeed;\n        break;\n      case 'rotate_right':\n        angular = -angularSpeed;\n        break;\n      default:\n        break;\n    }\n\n    publishCmdVel(linear, angular);\n    addLog('info', `移動指令: 線速度=${linear.toFixed(2)}, 角速度=${angular.toFixed(2)}`);\n  }, [rosConnected, speed, angularSpeed, publishCmdVel, addLog]);\n\n  // 地圖交互\n  const handleMapWheel = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    const delta = event.deltaY > 0 ? 0.9 : 1.1;\n    const newZoom = Math.max(0.5, Math.min(5.0, mapZoom * delta));\n    setMapZoom(newZoom);\n    \n    if (mapData) setTimeout(() => drawMap(mapData), 10);\n  };\n\n  const handleMapMouseDown = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsDragging(true);\n    setLastMousePos({ x: event.clientX, y: event.clientY });\n  };\n\n  const handleMapMouseMove = (event) => {\n    if (!isDragging) return;\n    \n    const deltaX = event.clientX - lastMousePos.x;\n    const deltaY = event.clientY - lastMousePos.y;\n    \n    setMapOffset(prev => ({\n      x: prev.x + deltaX,\n      y: prev.y + deltaY\n    }));\n    \n    setLastMousePos({ x: event.clientX, y: event.clientY });\n    \n    if (mapData) drawMap(mapData);\n  };\n\n  const handleMapMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  const resetMapView = () => {\n    setMapZoom(1.0);\n    setMapOffset({ x: 0, y: 0 });\n    if (mapData) setTimeout(() => drawMap(mapData), 10);\n  };\n\n  // 地圖點擊處理\n  const handleMapClick = (event) => {\n    if (!mapData) return;\n\n    const canvas = mapCanvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    if (currentMode === 'mapping') {\n      if (newStationName.trim()) {\n        const newStation = {\n          id: Date.now(),\n          name: newStationName,\n          x: x,\n          y: y,\n          type: 'work',\n          color: 'bg-blue-500'\n        };\n        setStations(prev => [...prev, newStation]);\n        setNewStationName('');\n        addLog('success', `新增站點: ${newStation.name}`);\n      }\n    } else if (currentMode === 'waypoints') {\n      const newWaypoint = {\n        id: Date.now(),\n        x: x,\n        y: y,\n        order: waypoints.length + 1\n      };\n      setWaypoints(prev => [...prev, newWaypoint]);\n      addLog('success', `新增航點 ${newWaypoint.order}`);\n    } else if (currentMode === 'navigation') {\n      const worldX = x * mapData.info.resolution + mapData.info.origin.position.x;\n      const worldY = (canvas.height - y) * mapData.info.resolution + mapData.info.origin.position.y;\n      setGoalPose({ x: worldX, y: worldY });\n      addLog('info', `設置導航目標: (${worldX.toFixed(2)}, ${worldY.toFixed(2)})`);\n    }\n  };\n\n  const initROS = () => {\n    addLog('info', '手動重新連接 ROS...');\n    console.log('👆 用戶手動重新連接');\n    \n    // 強制重新載入頁面來重置連接\n    window.location.reload();\n  };\n\n  const getBatteryColor = () => {\n    if (batteryLevel > 60) return 'text-green-400';\n    if (batteryLevel > 30) return 'text-yellow-400';\n    return 'text-red-400';\n  };\n\n  const getStatusColor = () => {\n    if (robotStatus.includes('移動') || robotStatus.includes('導航') || robotStatus.includes('巡邏')) return 'text-blue-400';\n    if (robotStatus.includes('已到達') || robotStatus.includes('已連接')) return 'text-green-400';\n    if (robotStatus.includes('停止') || robotStatus.includes('錯誤')) return 'text-red-400';\n    if (robotStatus.includes('建圖')) return 'text-purple-400';\n    return 'text-gray-400';\n  };\n\n  return (\n    <div className=\"h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-6 overflow-hidden\">\n      <div className=\"h-full max-w-7xl mx-auto flex flex-col\">\n        {/* 標題 */}\n        <div className=\"text-center mb-6\">\n          <h1 className=\"text-4xl font-bold text-white mb-2\">AMR 智能導航系統</h1>\n          <p className=\"text-gray-300\">建圖 · 導航 · 巡邏控制台</p>\n        </div>\n\n        {/* ROS 連接設定 */}\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-4 mb-6 border border-white/20\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex-1\">\n              <label className=\"block text-sm font-medium text-gray-300 mb-2\">ROS Bridge URL</label>\n              <input\n                type=\"text\"\n                value={rosUrl}\n                onChange={(e) => setRosUrl(e.target.value)}\n                className=\"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-gray-400\"\n                placeholder=\"ws://localhost:9090\"\n              />\n            </div>\n            <button\n              onClick={initROS}\n              disabled={rosConnected}\n              className=\"px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\"\n            >\n              {rosConnected ? '已連接' : '連接 ROS'}\n            </button>\n            <button\n              onClick={() => window.open('/monitor', '_blank')}\n              className=\"px-6 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-all\"\n            >\n              開啟監控頁面\n            </button>\n          </div>\n        </div>\n\n        {/* 模式切換 */}\n        <div className=\"flex justify-center gap-2 mb-6\">\n          <button\n            onClick={() => setCurrentMode('teleop')}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              currentMode === 'teleop' ? 'bg-blue-500 text-white' : 'bg-white/10 text-gray-300'\n            }`}\n          >\n            遙控模式\n          </button>\n          <button\n            onClick={() => setCurrentMode('mapping')}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              currentMode === 'mapping' ? 'bg-purple-500 text-white' : 'bg-white/10 text-gray-300'\n            }`}\n          >\n            建圖模式\n          </button>\n          <button\n            onClick={() => setCurrentMode('waypoints')}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              currentMode === 'waypoints' ? 'bg-green-500 text-white' : 'bg-white/10 text-gray-300'\n            }`}\n          >\n            航點模式\n          </button>\n          <button\n            onClick={() => setCurrentMode('navigation')}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              currentMode === 'navigation' ? 'bg-orange-500 text-white' : 'bg-white/10 text-gray-300'\n            }`}\n          >\n            導航模式\n          </button>\n        </div>\n\n        {/* 狀態概覽 */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n          <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n            <div className=\"flex items-center gap-3\">\n              {rosConnected ? <Wifi className=\"w-8 h-8 text-green-400\" /> : <WifiOff className=\"w-8 h-8 text-red-400\" />}\n              <div>\n                <p className=\"text-sm text-gray-300\">ROS 狀態</p>\n                <p className={`font-semibold ${getStatusColor()}`}>{robotStatus}</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n            <div className=\"flex items-center gap-3\">\n              <Battery className={`w-8 h-8 ${getBatteryColor()}`} />\n              <div>\n                <p className=\"text-sm text-gray-300\">電量</p>\n                <p className={`font-semibold ${getBatteryColor()}`}>{batteryLevel.toFixed(1)}%</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n            <div className=\"flex items-center gap-3\">\n              <MapPin className=\"w-8 h-8 text-purple-400\" />\n              <div>\n                <p className=\"text-sm text-gray-300\">位置</p>\n                <p className=\"font-semibold text-purple-400\">\n                  ({currentPose.x}, {currentPose.y})\n                </p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n            <div className=\"flex items-center gap-3\">\n              <Activity className=\"w-8 h-8 text-orange-400\" />\n              <div>\n                <p className=\"text-sm text-gray-300\">航點數量</p>\n                <p className=\"font-semibold text-orange-400\">{waypoints.length} 個</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* 主要內容區域 */}\n        <div className=\"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6 min-h-0\">\n          {/* 地圖區域 */}\n          <div className=\"lg:col-span-2 flex flex-col min-h-0\">\n            <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 flex-1 flex flex-col min-h-0\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-xl font-semibold text-white flex items-center gap-2\">\n                  <Map className=\"w-5 h-5\" />\n                  智能地圖\n                </h2>\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={resetMapView}\n                    className=\"px-3 py-1 bg-blue-500/80 hover:bg-blue-600/80 text-white rounded text-sm transition-all\"\n                    title=\"重置視圖\"\n                  >\n                    🔄 重置\n                  </button>\n                  <div className=\"px-3 py-1 bg-black/60 text-white rounded text-sm\">\n                    {(mapZoom * 100).toFixed(0)}%\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"flex-1 bg-black/30 rounded-lg p-4 relative min-h-0\">\n                <canvas\n                  ref={mapCanvasRef}\n                  onClick={handleMapClick}\n                  onWheel={handleMapWheel}\n                  onMouseDown={handleMapMouseDown}\n                  onMouseMove={handleMapMouseMove}\n                  onMouseUp={handleMapMouseUp}\n                  onMouseLeave={handleMapMouseUp}\n                  className=\"w-full h-full bg-gray-800 rounded cursor-move select-none\"\n                  style={{ touchAction: 'none' }}\n                />\n                \n                {!mapData && (\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <div className=\"text-gray-400 text-center\">\n                      <MapPin className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n                      <p className=\"text-lg mb-2\">等待地圖數據...</p>\n                      <p className=\"text-sm\">請確保 SLAM 節點正在運行</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"flex justify-between text-xs text-gray-400 mt-2\">\n                <span>🔵 機器人 🔴 目標 🟢 航點 🏠 充電站 🚩 工作站</span>\n                <span>滾輪縮放 · 拖拽移動</span>\n              </div>\n            </div>\n          </div>\n\n          {/* 控制面板 */}\n          <div className=\"space-y-6 overflow-y-auto\">\n            {/* 遙控模式 */}\n            {currentMode === 'teleop' && (\n              <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\">\n                <h2 className=\"text-xl font-semibold text-white mb-4\">鍵盤控制</h2>\n                \n                <div className=\"grid grid-cols-3 gap-2 max-w-48 mx-auto mb-4\">\n                  <div></div>\n                  <button \n                    onMouseDown={() => moveRobot('forward')}\n                    onMouseUp={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\"\n                  >\n                    <ArrowUp className=\"w-6 h-6 mx-auto\" />\n                  </button>\n                  <div></div>\n                  \n                  <button \n                    onMouseDown={() => moveRobot('left')}\n                    onMouseUp={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\"\n                  >\n                    <ArrowLeft className=\"w-6 h-6 mx-auto\" />\n                  </button>\n                  <button \n                    onClick={stopRobot}\n                    className=\"p-3 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-all\"\n                  >\n                    <Square className=\"w-6 h-6 mx-auto\" />\n                  </button>\n                  <button \n                    onMouseDown={() => moveRobot('right')}\n                    onMouseUp={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\"\n                  >\n                    <ArrowRight className=\"w-6 h-6 mx-auto\" />\n                  </button>\n                  \n                  <div></div>\n                  <button \n                    onMouseDown={() => moveRobot('backward')}\n                    onMouseUp={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\"\n                  >\n                    <ArrowDown className=\"w-6 h-6 mx-auto\" />\n                  </button>\n                  <div></div>\n                </div>\n                \n                <div className=\"flex gap-2 mb-4\">\n                  <button \n                    onMouseDown={() => moveRobot('rotate_left')}\n                    onMouseUp={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"flex-1 flex items-center justify-center gap-2 p-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\"\n                  >\n                    <RotateCcw className=\"w-4 h-4\" />\n                    左轉\n                  </button>\n                  <button \n                    onMouseDown={() => moveRobot('rotate_right')}\n                    onMouseUp={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"flex-1 flex items-center justify-center gap-2 p-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\"\n                  >\n                    <RotateCw className=\"w-4 h-4\" />\n                    右轉\n                  </button>\n                </div>\n                \n                <div className=\"space-y-3\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      線速度: {speed.toFixed(1)} m/s\n                    </label>\n                    <input\n                      type=\"range\"\n                      min=\"0.1\"\n                      max=\"1.0\"\n                      step=\"0.1\"\n                      value={speed}\n                      onChange={(e) => setSpeed(parseFloat(e.target.value))}\n                      className=\"w-full h-2 bg-white/20 rounded-lg appearance-none\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      角速度: {angularSpeed.toFixed(1)} rad/s\n                    </label>\n                    <input\n                      type=\"range\"\n                      min=\"0.1\"\n                      max=\"2.0\"\n                      step=\"0.1\"\n                      value={angularSpeed}\n                      onChange={(e) => setAngularSpeed(parseFloat(e.target.value))}\n                      className=\"w-full h-2 bg-white/20 rounded-lg appearance-none\"\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* 建圖模式 */}\n            {currentMode === 'mapping' && (\n              <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\">\n                <h2 className=\"text-xl font-semibold text-white mb-4\">建圖工具</h2>\n                \n                <div className=\"space-y-3\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"輸入站點名稱\"\n                    value={newStationName}\n                    onChange={(e) => setNewStationName(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                  />\n                  <p className=\"text-sm text-gray-300\">點擊地圖新增站點</p>\n                  \n                  <button\n                    onClick={() => setIsMappingActive(!isMappingActive)}\n                    disabled={!rosConnected}\n                    className={`w-full flex items-center justify-center gap-2 px-4 py-3 ${\n                      isMappingActive ? 'bg-red-500 hover:bg-red-600' : 'bg-purple-500 hover:bg-purple-600'\n                    } disabled:bg-gray-600 text-white rounded-lg font-medium transition-all`}\n                  >\n                    <Map className=\"w-5 h-5\" />\n                    {isMappingActive ? '停止建圖' : '開始建圖'}\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* 航點模式 */}\n            {currentMode === 'waypoints' && (\n              <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\">\n                <h2 className=\"text-xl font-semibold text-white mb-4\">航點管理</h2>\n                \n                <div className=\"space-y-3\">\n                  <button\n                    onClick={() => {\n                      if (waypoints.length === 0) {\n                        addLog('error', '沒有設定航點，無法開始巡邏');\n                        return;\n                      }\n                      setIsPatrolling(!isPatrolling);\n                      if (!isPatrolling) {\n                        setCurrentWaypointIndex(0);\n                        addLog('info', '開始自動巡邏');\n                      } else {\n                        addLog('info', '停止巡邏');\n                      }\n                    }}\n                    disabled={waypoints.length === 0 || !rosConnected}\n                    className=\"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg font-medium transition-all\"\n                  >\n                    {isPatrolling ? <Pause className=\"w-5 h-5\" /> : <Play className=\"w-5 h-5\" />}\n                    {isPatrolling ? '停止巡邏' : '開始巡邏'}\n                  </button>\n                  <p className=\"text-sm text-gray-300\">點擊地圖新增航點</p>\n                </div>\n              </div>\n            )}\n\n            {/* 導航模式 */}\n            {currentMode === 'navigation' && (\n              <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\">\n                <h2 className=\"text-xl font-semibold text-white mb-4\">自主導航</h2>\n                \n                <div className=\"space-y-4\">\n                  {goalPose && (\n                    <div className=\"bg-black/20 rounded-lg p-3\">\n                      <p className=\"text-sm text-gray-300\">目標位置:</p>\n                      <p className=\"text-white\">({goalPose.x.toFixed(2)}, {goalPose.y.toFixed(2)})</p>\n                    </div>\n                  )}\n                  \n                  <button\n                    onClick={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white rounded-lg font-medium transition-all\"\n                  >\n                    <Square className=\"w-5 h-5\" />\n                    停止導航\n                  </button>\n                  \n                  <p className=\"text-sm text-gray-300\">\n                    點擊地圖設置導航目標點\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {/* 站點列表 */}\n            <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\">\n              <h2 className=\"text-xl font-semibold text-white mb-4\">站點管理</h2>\n              \n              <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n                {stations.map(station => (\n                  <div key={station.id} className=\"flex items-center justify-between p-2 bg-white/10 rounded-lg\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className={`w-3 h-3 ${station.color} rounded`}></div>\n                      <span className=\"text-white text-sm\">{station.name}</span>\n                    </div>\n                    <div className=\"flex gap-1\">\n                      <button\n                        disabled={!rosConnected}\n                        className=\"p-1 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded text-xs transition-all\"\n                      >\n                        前往\n                      </button>\n                      <button\n                        onClick={() => setStations(prev => prev.filter(s => s.id !== station.id))}\n                        className=\"p-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs transition-all\"\n                      >\n                        <Trash2 className=\"w-3 h-3\" />\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* 快速動作 */}\n            <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\">\n              <h2 className=\"text-xl font-semibold text-white mb-4\">快速動作</h2>\n              \n              <div className=\"grid grid-cols-1 gap-2\">\n                <button \n                  onClick={() => {\n                    const chargingStation = stations.find(s => s.type === 'charging');\n                    if (chargingStation) {\n                      const worldX = chargingStation.x;\n                      const worldY = chargingStation.y;\n                      setGoalPose({ x: worldX, y: worldY });\n                      addLog('info', '導航至充電站');\n                    }\n                  }}\n                  disabled={!rosConnected || !stations.find(s => s.type === 'charging')}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\"\n                >\n                  <Home className=\"w-4 h-4\" />\n                  回充電站\n                </button>\n                <button \n                  onClick={stopRobot}\n                  disabled={!rosConnected}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\"\n                >\n                  <Square className=\"w-4 h-4\" />\n                  緊急停止\n                </button>\n                <button \n                  onClick={() => window.open('http://localhost:8080', '_blank')}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm transition-all\"\n                >\n                  <Camera className=\"w-4 h-4\" />\n                  攝影機視圖\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TurtleBotInterface;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}