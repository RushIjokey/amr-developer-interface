{"ast":null,"code":"var _jsxFileName = \"/home/leo/amr-developer-interface/src/components/AMRDeveloperInterface.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Square, ArrowUp, ArrowDown, ArrowLeft, ArrowRight, Battery, Wifi, WifiOff, RotateCw, RotateCcw, Plus, Minus, Home } from 'lucide-react';\n\n// 從全局變量獲取 ROSLIB (CDN 方式)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ROSLIB = window.ROSLIB || (() => {\n  console.warn('ROSLIB 未加載，使用模擬模式');\n  return {\n    Ros: class {\n      constructor() {\n        this.isConnected = false;\n      }\n      connect() {\n        console.log('模擬 ROS 連接');\n        setTimeout(() => {\n          this.isConnected = true;\n          if (this.onConnection) this.onConnection();\n        }, 1000);\n      }\n      close() {\n        this.isConnected = false;\n      }\n      on() {}\n    },\n    Topic: class {\n      publish() {}\n      subscribe() {}\n    },\n    Service: class {\n      callService() {}\n    },\n    Message: class {\n      constructor(data) {\n        Object.assign(this, data);\n      }\n    }\n  };\n})();\nconst TurtleBotInterface = () => {\n  _s();\n  // ROS 連接狀態\n  const [rosConnected, setRosConnected] = useState(false);\n  const [rosUrl, setRosUrl] = useState('ws://localhost:9090');\n\n  // 機器人狀態\n  const [robotStatus, setRobotStatus] = useState('未連接');\n  const [batteryLevel, setBatteryLevel] = useState(85);\n  const [currentPose, setCurrentPose] = useState({\n    x: 0,\n    y: 0,\n    theta: 0\n  });\n  const [speed, setSpeed] = useState(0.2);\n  const [angularSpeed, setAngularSpeed] = useState(0.5);\n\n  // 地圖和導航\n  const [mapData, setMapData] = useState(null);\n\n  // 地圖縮放和拖拽狀態\n  const [mapZoom, setMapZoom] = useState(1.0);\n  const [mapOffset, setMapOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const [lastMousePos, setLastMousePos] = useState({\n    x: 0,\n    y: 0\n  });\n\n  // UI 狀態\n  const mapCanvasRef = useRef(null);\n  const cmdVelRef = useRef(null);\n  const mapSubRef = useRef(null);\n  const odomSubRef = useRef(null);\n  const rosRef = useRef(null);\n  const addLog = useCallback((type, message) => {\n    console.log(`[${new Date().toLocaleTimeString()}] ${type}: ${message}`);\n  }, []);\n\n  // 繪製地圖到 Canvas（移動到上面了）\n\n  // 重繪地圖的函數 - 修正座標變換\n  const redrawMap = useCallback(mapMessage => {\n    const canvas = mapCanvasRef.current;\n    if (!canvas || !mapMessage) return;\n    const ctx = canvas.getContext('2d');\n    const {\n      width,\n      height,\n      resolution,\n      origin\n    } = mapMessage.info;\n    const {\n      data\n    } = mapMessage;\n    if (!data || data.length === 0) return;\n    const displayWidth = canvas.clientWidth || 800;\n    const displayHeight = canvas.clientHeight || 600;\n    canvas.width = displayWidth;\n    canvas.height = displayHeight;\n\n    // 清空畫布 - 使用淺灰色背景\n    ctx.fillStyle = '#e5e7eb';\n    ctx.fillRect(0, 0, displayWidth, displayHeight);\n    const baseScaleX = displayWidth / width;\n    const baseScaleY = displayHeight / height;\n    const baseScale = Math.min(baseScaleX, baseScaleY) * 0.8;\n    const finalScale = baseScale * mapZoom;\n    const centerX = displayWidth / 2;\n    const centerY = displayHeight / 2;\n    const offsetX = centerX - width * finalScale / 2 + mapOffset.x;\n    const offsetY = centerY - height * finalScale / 2 + mapOffset.y;\n\n    // 繪製地圖 - 優化性能\n    const imageData = ctx.createImageData(Math.ceil(width * finalScale), Math.ceil(height * finalScale));\n    for (let y = 0; y < height; y += 2) {\n      // 降低解析度以提高性能\n      for (let x = 0; x < width; x += 2) {\n        const dataIndex = y * width + x;\n        const value = data[dataIndex];\n        if (value === -1) continue; // 未知區域不繪製\n\n        let color;\n        if (value >= 0 && value < 25) {\n          color = [255, 255, 255, 255]; // 空閒區域 (白色)\n        } else if (value >= 65) {\n          color = [0, 0, 0, 255]; // 障礙物 (黑色)\n        } else {\n          color = [209, 213, 219, 255]; // 部分已知區域\n        }\n        const scaledX = Math.floor(x * finalScale);\n        const scaledY = Math.floor(y * finalScale);\n        if (scaledX < imageData.width && scaledY < imageData.height) {\n          const pixelIndex = (scaledY * imageData.width + scaledX) * 4;\n          if (pixelIndex + 3 < imageData.data.length) {\n            imageData.data[pixelIndex] = color[0];\n            imageData.data[pixelIndex + 1] = color[1];\n            imageData.data[pixelIndex + 2] = color[2];\n            imageData.data[pixelIndex + 3] = color[3];\n          }\n        }\n      }\n    }\n    ctx.putImageData(imageData, offsetX, offsetY);\n\n    // 繪製機器人位置 - 修正座標變換\n    if (currentPose && currentPose.x !== undefined) {\n      const robotWorldX = parseFloat(currentPose.x);\n      const robotWorldY = parseFloat(currentPose.y);\n\n      // 正確的座標變換公式\n      const robotMapX = (robotWorldX - origin.position.x) / resolution;\n      const robotMapY = height - (robotWorldY - origin.position.y) / resolution;\n      const robotDisplayX = offsetX + robotMapX * finalScale;\n      const robotDisplayY = offsetY + robotMapY * finalScale;\n      console.log('機器人位置計算:', {\n        world: {\n          x: robotWorldX,\n          y: robotWorldY\n        },\n        origin: origin.position,\n        map: {\n          x: robotMapX,\n          y: robotMapY\n        },\n        display: {\n          x: robotDisplayX,\n          y: robotDisplayY\n        }\n      });\n\n      // 只有當機器人在可見範圍內才繪製\n      if (robotDisplayX >= -100 && robotDisplayX <= displayWidth + 100 && robotDisplayY >= -100 && robotDisplayY <= displayHeight + 100) {\n        // 繪製機器人（紅色三角形）\n        const theta = parseFloat(currentPose.theta) * Math.PI / 180;\n        const size = Math.max(10, 15 * mapZoom);\n        ctx.fillStyle = '#ef4444';\n        ctx.strokeStyle = '#dc2626';\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n        ctx.moveTo(robotDisplayX + Math.cos(theta) * size, robotDisplayY - Math.sin(theta) * size);\n        ctx.lineTo(robotDisplayX + Math.cos(theta + 2.5) * size * 0.6, robotDisplayY - Math.sin(theta + 2.5) * size * 0.6);\n        ctx.lineTo(robotDisplayX + Math.cos(theta - 2.5) * size * 0.6, robotDisplayY - Math.sin(theta - 2.5) * size * 0.6);\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n\n        // 繪製機器人軌跡圓圈\n        ctx.strokeStyle = '#ef444480';\n        ctx.lineWidth = 1;\n        ctx.setLineDash([3, 3]);\n        ctx.beginPath();\n        ctx.arc(robotDisplayX, robotDisplayY, Math.max(20, 30 * mapZoom), 0, 2 * Math.PI);\n        ctx.stroke();\n        ctx.setLineDash([]);\n      }\n    }\n  }, [currentPose, mapZoom, mapOffset]);\n  const setupRosTopics = useCallback(rosInstance => {\n    try {\n      cmdVelRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/cmd_vel',\n        messageType: 'geometry_msgs/Twist'\n      });\n      odomSubRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/odom',\n        messageType: 'nav_msgs/Odometry'\n      });\n\n      // 添加數據過濾，減少位置跳動\n      let lastPose = null;\n      odomSubRef.current.subscribe(message => {\n        const {\n          position,\n          orientation\n        } = message.pose.pose;\n        const theta = 2 * Math.atan2(orientation.z, orientation.w);\n        const newPose = {\n          x: parseFloat(position.x.toFixed(3)),\n          // 增加精度\n          y: parseFloat(position.y.toFixed(3)),\n          theta: (theta * 180 / Math.PI).toFixed(1)\n        };\n\n        // 只有當位置變化超過閾值時才更新，減少跳動\n        if (!lastPose || Math.abs(newPose.x - lastPose.x) > 0.01 || Math.abs(newPose.y - lastPose.y) > 0.01 || Math.abs(parseFloat(newPose.theta) - parseFloat(lastPose.theta)) > 1) {\n          setCurrentPose(newPose);\n          lastPose = newPose;\n\n          // 觸發地圖重繪\n          if (mapData) {\n            redrawMap(mapData);\n          }\n        }\n      });\n      mapSubRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/map',\n        messageType: 'nav_msgs/OccupancyGrid'\n      });\n      addLog('info', '正在訂閱地圖話題 /map...');\n      mapSubRef.current.subscribe(message => {\n        console.log('🗺️ 收到地圖數據!', {\n          width: message.info.width,\n          height: message.info.height,\n          resolution: message.info.resolution,\n          origin: message.info.origin,\n          dataLength: message.data ? message.data.length : 0\n        });\n        if (message.data && message.data.length > 0) {\n          setMapData(message);\n          // 延遲繪製，確保狀態更新\n          setTimeout(() => {\n            if (mapCanvasRef.current) {\n              redrawMap(message);\n            }\n          }, 100);\n          addLog('success', `地圖更新: ${message.info.width}x${message.info.height}`);\n        }\n      });\n      const batterySimulation = setInterval(() => {\n        setBatteryLevel(prev => Math.max(20, prev - 0.1));\n      }, 10000);\n      rosInstance.batterySimulation = batterySimulation;\n      addLog('success', 'ROS 話題設置完成');\n    } catch (error) {\n      addLog('error', `話題設置失敗: ${error.message}`);\n    }\n  }, [addLog, redrawMap, mapData]);\n\n  // 繪製地圖到 Canvas\n  // 移除未使用的 drawMap 變數\n\n  // 初始化 ROS 連接 - 更穩定的版本\n  useEffect(() => {\n    if (window.ROSLIB) {\n      addLog('success', 'ROSLIB 已成功加載');\n    } else {\n      addLog('warning', 'ROSLIB 未加載，使用模擬模式');\n    }\n    let reconnectTimer = null;\n    let isConnecting = false;\n    const initAndSetupROS = () => {\n      if (isConnecting) return; // 防止重複連接\n\n      try {\n        isConnecting = true;\n        // 清除之前的定時器\n        if (reconnectTimer) {\n          clearTimeout(reconnectTimer);\n        }\n\n        // 關閉舊連接\n        if (rosRef.current) {\n          try {\n            rosRef.current.close();\n          } catch (e) {\n            console.log('關閉舊連接');\n          }\n        }\n        const rosInstance = new ROSLIB.Ros({\n          url: rosUrl,\n          groovyCompatibility: false\n        });\n        rosInstance.on('connection', () => {\n          isConnecting = false;\n          setRosConnected(true);\n          setRobotStatus('已連接');\n          addLog('success', 'ROS 連接成功');\n\n          // 延遲設置話題，確保連接穩定\n          setTimeout(() => {\n            setupRosTopics(rosInstance);\n          }, 1000);\n        });\n        rosInstance.on('error', error => {\n          isConnecting = false;\n          console.error('ROS 連接錯誤:', error);\n          setRosConnected(false);\n          setRobotStatus('連接錯誤');\n          addLog('error', `連接錯誤，5秒後重試`);\n\n          // 延長重連間隔，減少跳動\n          reconnectTimer = setTimeout(() => {\n            if (!rosRef.current || !rosRef.current.isConnected) {\n              addLog('info', '嘗試重新連接...');\n              initAndSetupROS();\n            }\n          }, 5000);\n        });\n        rosInstance.on('close', () => {\n          isConnecting = false;\n          setRosConnected(false);\n          setRobotStatus('連接斷開');\n          addLog('warning', 'ROS 連接斷開，3秒後重連');\n\n          // 延長重連間隔\n          reconnectTimer = setTimeout(() => {\n            addLog('info', '嘗試重新連接...');\n            initAndSetupROS();\n          }, 3000);\n        });\n        rosRef.current = rosInstance;\n      } catch (error) {\n        isConnecting = false;\n        addLog('error', `初始化失敗: ${error.message}`);\n\n        // 更長的重試間隔\n        reconnectTimer = setTimeout(() => {\n          addLog('info', '重試初始化...');\n          initAndSetupROS();\n        }, 10000);\n      }\n    };\n    initAndSetupROS();\n\n    // 清理函數\n    return () => {\n      isConnecting = false;\n      if (reconnectTimer) {\n        clearTimeout(reconnectTimer);\n      }\n      if (rosRef.current) {\n        try {\n          rosRef.current.close();\n        } catch (e) {\n          console.log('清理連接');\n        }\n      }\n    };\n  }, [rosUrl, addLog, setupRosTopics]);\n\n  // 發送速度命令\n  const publishCmdVel = useCallback((linear, angular) => {\n    if (!rosConnected || !cmdVelRef.current) return;\n    const twist = new ROSLIB.Message({\n      linear: {\n        x: linear,\n        y: 0,\n        z: 0\n      },\n      angular: {\n        x: 0,\n        y: 0,\n        z: angular\n      }\n    });\n    cmdVelRef.current.publish(twist);\n  }, [rosConnected]);\n\n  // 停止機器人\n  const stopRobot = useCallback(() => {\n    publishCmdVel(0, 0);\n    addLog('warning', '機器人停止');\n  }, [publishCmdVel, addLog]);\n\n  // 移動機器人\n  const moveRobot = useCallback(direction => {\n    if (!rosConnected) {\n      addLog('error', '請先連接 ROS');\n      return;\n    }\n    let linear = 0,\n      angular = 0;\n    switch (direction) {\n      case 'forward':\n        linear = speed;\n        break;\n      case 'backward':\n        linear = -speed;\n        break;\n      case 'left':\n        angular = angularSpeed;\n        break;\n      case 'right':\n        angular = -angularSpeed;\n        break;\n      case 'rotate_left':\n        angular = angularSpeed;\n        break;\n      case 'rotate_right':\n        angular = -angularSpeed;\n        break;\n      default:\n        break;\n    }\n    publishCmdVel(linear, angular);\n    addLog('info', `移動指令: 線速度=${linear.toFixed(2)}, 角速度=${angular.toFixed(2)}`);\n  }, [rosConnected, speed, angularSpeed, publishCmdVel, addLog]);\n\n  // 地圖縮放控制\n  const handleZoomIn = () => {\n    const newZoom = Math.min(5.0, mapZoom * 1.2);\n    setMapZoom(newZoom);\n    if (mapData) setTimeout(() => redrawMap(mapData), 10);\n  };\n  const handleZoomOut = () => {\n    const newZoom = Math.max(0.5, mapZoom * 0.8);\n    setMapZoom(newZoom);\n    if (mapData) setTimeout(() => redrawMap(mapData), 10);\n  };\n\n  // 重置地圖視圖\n  const resetMapView = () => {\n    setMapZoom(1.0);\n    setMapOffset({\n      x: 0,\n      y: 0\n    });\n    if (mapData) setTimeout(() => redrawMap(mapData), 10);\n  };\n\n  // 滑鼠事件處理\n  const handleMapMouseDown = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsDragging(true);\n    setLastMousePos({\n      x: event.clientX,\n      y: event.clientY\n    });\n  };\n  const handleMapMouseMove = event => {\n    if (!isDragging) return;\n    const deltaX = event.clientX - lastMousePos.x;\n    const deltaY = event.clientY - lastMousePos.y;\n    setMapOffset(prev => ({\n      x: prev.x + deltaX,\n      y: prev.y + deltaY\n    }));\n    setLastMousePos({\n      x: event.clientX,\n      y: event.clientY\n    });\n    if (mapData) redrawMap(mapData);\n  };\n  const handleMapMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  // 滾輪縮放（防止頁面滾動）\n  const handleMapWheel = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    const delta = event.deltaY > 0 ? 0.9 : 1.1;\n    const newZoom = Math.max(0.5, Math.min(5.0, mapZoom * delta));\n    setMapZoom(newZoom);\n    if (mapData) setTimeout(() => redrawMap(mapData), 10);\n  };\n  const initROS = () => {\n    // 強制重新加載頁面來重置所有連接\n    addLog('info', '重新初始化 ROS 連接...');\n    setTimeout(() => {\n      window.location.reload();\n    }, 500);\n  };\n  const getBatteryColor = () => {\n    if (batteryLevel > 60) return 'text-green-400';\n    if (batteryLevel > 30) return 'text-yellow-400';\n    return 'text-red-400';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 relative overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-blue-500 text-white px-4 py-2 flex justify-between items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"font-semibold\",\n          children: \"TurtleBot3 \\u63A7\\u5236\\u754C\\u9762\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [rosConnected ? /*#__PURE__*/_jsxDEV(Wifi, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(WifiOff, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 60\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm\",\n            children: robotStatus\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Battery, {\n            className: `w-4 h-4 ${getBatteryColor()}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm\",\n            children: [batteryLevel.toFixed(1), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm\",\n          children: [\"\\u4F4D\\u7F6E: (\", currentPose.x, \", \", currentPose.y, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative flex-1\",\n      style: {\n        height: 'calc(100vh - 160px)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: mapCanvasRef,\n        onMouseDown: handleMapMouseDown,\n        onMouseMove: handleMapMouseMove,\n        onMouseUp: handleMapMouseUp,\n        onMouseLeave: handleMapMouseUp,\n        onWheel: handleMapWheel,\n        className: \"w-full h-full cursor-move select-none bg-gray-200\",\n        style: {\n          touchAction: 'none'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-4 right-4 flex flex-col gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleZoomIn,\n          className: \"w-10 h-10 bg-white border border-gray-300 rounded shadow hover:bg-gray-50 flex items-center justify-center\",\n          title: \"\\u653E\\u5927\",\n          children: /*#__PURE__*/_jsxDEV(Plus, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleZoomOut,\n          className: \"w-10 h-10 bg-white border border-gray-300 rounded shadow hover:bg-gray-50 flex items-center justify-center\",\n          title: \"\\u7E2E\\u5C0F\",\n          children: /*#__PURE__*/_jsxDEV(Minus, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: resetMapView,\n          className: \"w-10 h-10 bg-white border border-gray-300 rounded shadow hover:bg-gray-50 flex items-center justify-center\",\n          title: \"\\u91CD\\u7F6E\\u8996\\u5716\",\n          children: /*#__PURE__*/_jsxDEV(Home, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-4 left-4 bg-black/60 text-white px-3 py-2 rounded text-sm\",\n        children: [\"\\u7E2E\\u653E: \", (mapZoom * 100).toFixed(0), \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-4 left-4\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: stopRobot,\n          className: \"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-bold text-lg shadow-lg\",\n          children: \"\\uD83D\\uDED1 \\u7DCA\\u6025\\u505C\\u6B62\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 555,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white border-t border-gray-300 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-6xl mx-auto flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: rosUrl,\n            onChange: e => setRosUrl(e.target.value),\n            className: \"px-3 py-2 border border-gray-300 rounded text-sm\",\n            placeholder: \"ws://localhost:9090\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 613,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: initROS,\n            disabled: rosConnected,\n            className: \"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded text-sm\",\n            children: rosConnected ? '已連接' : '連接'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 620,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-1\",\n              children: \"\\u6A5F\\u5668\\u4EBA\\u901F\\u5EA6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setSpeed(Math.max(0.1, speed - 0.1)),\n                className: \"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(Minus, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 634,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-mono w-16 text-center\",\n                children: [speed.toFixed(1), \" m/s\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setSpeed(Math.min(1.0, speed + 0.1)),\n                className: \"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(Plus, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 645,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-600 mb-1\",\n              children: \"\\u89D2\\u901F\\u5EA6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setAngularSpeed(Math.max(0.1, angularSpeed - 0.1)),\n                className: \"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(Minus, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 657,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 653,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm font-mono w-16 text-center\",\n                children: [angularSpeed.toFixed(1), \" rad/s\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 659,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setAngularSpeed(Math.min(2.0, angularSpeed + 0.1)),\n                className: \"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(Plus, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 664,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 660,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 652,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-3 gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onMouseDown: () => moveRobot('forward'),\n              onMouseUp: stopRobot,\n              disabled: !rosConnected,\n              className: \"w-12 h-12 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(ArrowUp, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 682,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onMouseDown: () => moveRobot('left'),\n              onMouseUp: stopRobot,\n              disabled: !rosConnected,\n              className: \"w-12 h-12 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 690,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: stopRobot,\n              className: \"w-12 h-12 bg-red-500 hover:bg-red-600 text-white rounded flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(Square, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 696,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 692,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onMouseDown: () => moveRobot('right'),\n              onMouseUp: stopRobot,\n              disabled: !rosConnected,\n              className: \"w-12 h-12 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(ArrowRight, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 704,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 707,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onMouseDown: () => moveRobot('backward'),\n              onMouseUp: stopRobot,\n              disabled: !rosConnected,\n              className: \"w-12 h-12 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(ArrowDown, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 714,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 708,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 716,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 672,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onMouseDown: () => moveRobot('rotate_left'),\n              onMouseUp: stopRobot,\n              disabled: !rosConnected,\n              className: \"w-12 h-6 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white rounded flex items-center justify-center text-xs\",\n              children: /*#__PURE__*/_jsxDEV(RotateCcw, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 726,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 720,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onMouseDown: () => moveRobot('rotate_right'),\n              onMouseUp: stopRobot,\n              disabled: !rosConnected,\n              className: \"w-12 h-6 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white rounded flex items-center justify-center text-xs\",\n              children: /*#__PURE__*/_jsxDEV(RotateCw, {\n                className: \"w-4 h-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 734,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 728,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 610,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 609,\n      columnNumber: 7\n    }, this), !mapData && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 flex items-center justify-center bg-black/20\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-6 rounded-lg shadow-lg text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"\\u7B49\\u5F85\\u5730\\u5716\\u6578\\u64DA...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 746,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-400 mt-2\",\n          children: \"\\u8ACB\\u78BA\\u4FDD SLAM \\u7BC0\\u9EDE\\u6B63\\u5728\\u904B\\u884C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 747,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 744,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 743,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 535,\n    columnNumber: 5\n  }, this);\n};\n_s(TurtleBotInterface, \"BwVaEVoWdS+MqYX6fDnnbFmC//Y=\");\n_c = TurtleBotInterface;\nexport default TurtleBotInterface;\nvar _c;\n$RefreshReg$(_c, \"TurtleBotInterface\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Square","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Battery","Wifi","WifiOff","RotateCw","RotateCcw","Plus","Minus","Home","jsxDEV","_jsxDEV","ROSLIB","window","console","warn","Ros","constructor","isConnected","connect","log","setTimeout","onConnection","close","on","Topic","publish","subscribe","Service","callService","Message","data","Object","assign","TurtleBotInterface","_s","rosConnected","setRosConnected","rosUrl","setRosUrl","robotStatus","setRobotStatus","batteryLevel","setBatteryLevel","currentPose","setCurrentPose","x","y","theta","speed","setSpeed","angularSpeed","setAngularSpeed","mapData","setMapData","mapZoom","setMapZoom","mapOffset","setMapOffset","isDragging","setIsDragging","lastMousePos","setLastMousePos","mapCanvasRef","cmdVelRef","mapSubRef","odomSubRef","rosRef","addLog","type","message","Date","toLocaleTimeString","redrawMap","mapMessage","canvas","current","ctx","getContext","width","height","resolution","origin","info","length","displayWidth","clientWidth","displayHeight","clientHeight","fillStyle","fillRect","baseScaleX","baseScaleY","baseScale","Math","min","finalScale","centerX","centerY","offsetX","offsetY","imageData","createImageData","ceil","dataIndex","value","color","scaledX","floor","scaledY","pixelIndex","putImageData","undefined","robotWorldX","parseFloat","robotWorldY","robotMapX","position","robotMapY","robotDisplayX","robotDisplayY","world","map","display","PI","size","max","strokeStyle","lineWidth","beginPath","moveTo","cos","sin","lineTo","closePath","fill","stroke","setLineDash","arc","setupRosTopics","rosInstance","ros","name","messageType","lastPose","orientation","pose","atan2","z","w","newPose","toFixed","abs","dataLength","batterySimulation","setInterval","prev","error","reconnectTimer","isConnecting","initAndSetupROS","clearTimeout","e","url","groovyCompatibility","publishCmdVel","linear","angular","twist","stopRobot","moveRobot","direction","handleZoomIn","newZoom","handleZoomOut","resetMapView","handleMapMouseDown","event","preventDefault","stopPropagation","clientX","clientY","handleMapMouseMove","deltaX","deltaY","handleMapMouseUp","handleMapWheel","delta","initROS","location","reload","getBatteryColor","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","ref","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","onWheel","touchAction","onClick","title","onChange","target","placeholder","disabled","_c","$RefreshReg$"],"sources":["/home/leo/amr-developer-interface/src/components/AMRDeveloperInterface.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { \n  Square, \n  ArrowUp, \n  ArrowDown, \n  ArrowLeft, \n  ArrowRight,\n  Battery,\n  Wifi,\n  WifiOff,\n  RotateCw,\n  RotateCcw,\n  Plus,\n  Minus,\n  Home\n} from 'lucide-react';\n\n// 從全局變量獲取 ROSLIB (CDN 方式)\nconst ROSLIB = window.ROSLIB || (() => {\n  console.warn('ROSLIB 未加載，使用模擬模式');\n  return {\n    Ros: class {\n      constructor() {\n        this.isConnected = false;\n      }\n      connect() {\n        console.log('模擬 ROS 連接');\n        setTimeout(() => {\n          this.isConnected = true;\n          if (this.onConnection) this.onConnection();\n        }, 1000);\n      }\n      close() {\n        this.isConnected = false;\n      }\n      on() {}\n    },\n    Topic: class {\n      publish() {}\n      subscribe() {}\n    },\n    Service: class {\n      callService() {}\n    },\n    Message: class {\n      constructor(data) {\n        Object.assign(this, data);\n      }\n    }\n  };\n})();\n\nconst TurtleBotInterface = () => {\n  // ROS 連接狀態\n  const [rosConnected, setRosConnected] = useState(false);\n  const [rosUrl, setRosUrl] = useState('ws://localhost:9090');\n  \n  // 機器人狀態\n  const [robotStatus, setRobotStatus] = useState('未連接');\n  const [batteryLevel, setBatteryLevel] = useState(85);\n  const [currentPose, setCurrentPose] = useState({ x: 0, y: 0, theta: 0 });\n  const [speed, setSpeed] = useState(0.2);\n  const [angularSpeed, setAngularSpeed] = useState(0.5);\n  \n  // 地圖和導航\n  const [mapData, setMapData] = useState(null);\n  \n  // 地圖縮放和拖拽狀態\n  const [mapZoom, setMapZoom] = useState(1.0);\n  const [mapOffset, setMapOffset] = useState({ x: 0, y: 0 });\n  const [isDragging, setIsDragging] = useState(false);\n  const [lastMousePos, setLastMousePos] = useState({ x: 0, y: 0 });\n  \n  // UI 狀態\n  const mapCanvasRef = useRef(null);\n  const cmdVelRef = useRef(null);\n  const mapSubRef = useRef(null);\n  const odomSubRef = useRef(null);\n  const rosRef = useRef(null);\n\n  const addLog = useCallback((type, message) => {\n    console.log(`[${new Date().toLocaleTimeString()}] ${type}: ${message}`);\n  }, []);\n\n  // 繪製地圖到 Canvas（移動到上面了）\n  \n  // 重繪地圖的函數 - 修正座標變換\n  const redrawMap = useCallback((mapMessage) => {\n    const canvas = mapCanvasRef.current;\n    if (!canvas || !mapMessage) return;\n\n    const ctx = canvas.getContext('2d');\n    const { width, height, resolution, origin } = mapMessage.info;\n    const { data } = mapMessage;\n    \n    if (!data || data.length === 0) return;\n\n    const displayWidth = canvas.clientWidth || 800;\n    const displayHeight = canvas.clientHeight || 600;\n    canvas.width = displayWidth;\n    canvas.height = displayHeight;\n    \n    // 清空畫布 - 使用淺灰色背景\n    ctx.fillStyle = '#e5e7eb';\n    ctx.fillRect(0, 0, displayWidth, displayHeight);\n    \n    const baseScaleX = displayWidth / width;\n    const baseScaleY = displayHeight / height;\n    const baseScale = Math.min(baseScaleX, baseScaleY) * 0.8;\n    const finalScale = baseScale * mapZoom;\n    \n    const centerX = displayWidth / 2;\n    const centerY = displayHeight / 2;\n    const offsetX = centerX - (width * finalScale) / 2 + mapOffset.x;\n    const offsetY = centerY - (height * finalScale) / 2 + mapOffset.y;\n    \n    // 繪製地圖 - 優化性能\n    const imageData = ctx.createImageData(Math.ceil(width * finalScale), Math.ceil(height * finalScale));\n    \n    for (let y = 0; y < height; y += 2) { // 降低解析度以提高性能\n      for (let x = 0; x < width; x += 2) {\n        const dataIndex = y * width + x;\n        const value = data[dataIndex];\n        \n        if (value === -1) continue; // 未知區域不繪製\n        \n        let color;\n        if (value >= 0 && value < 25) {\n          color = [255, 255, 255, 255]; // 空閒區域 (白色)\n        } else if (value >= 65) {\n          color = [0, 0, 0, 255]; // 障礙物 (黑色)\n        } else {\n          color = [209, 213, 219, 255]; // 部分已知區域\n        }\n        \n        const scaledX = Math.floor(x * finalScale);\n        const scaledY = Math.floor(y * finalScale);\n        \n        if (scaledX < imageData.width && scaledY < imageData.height) {\n          const pixelIndex = (scaledY * imageData.width + scaledX) * 4;\n          if (pixelIndex + 3 < imageData.data.length) {\n            imageData.data[pixelIndex] = color[0];\n            imageData.data[pixelIndex + 1] = color[1];\n            imageData.data[pixelIndex + 2] = color[2];\n            imageData.data[pixelIndex + 3] = color[3];\n          }\n        }\n      }\n    }\n    \n    ctx.putImageData(imageData, offsetX, offsetY);\n    \n    // 繪製機器人位置 - 修正座標變換\n    if (currentPose && currentPose.x !== undefined) {\n      const robotWorldX = parseFloat(currentPose.x);\n      const robotWorldY = parseFloat(currentPose.y);\n      \n      // 正確的座標變換公式\n      const robotMapX = (robotWorldX - origin.position.x) / resolution;\n      const robotMapY = height - (robotWorldY - origin.position.y) / resolution;\n      \n      const robotDisplayX = offsetX + robotMapX * finalScale;\n      const robotDisplayY = offsetY + robotMapY * finalScale;\n      \n      console.log('機器人位置計算:', {\n        world: { x: robotWorldX, y: robotWorldY },\n        origin: origin.position,\n        map: { x: robotMapX, y: robotMapY },\n        display: { x: robotDisplayX, y: robotDisplayY }\n      });\n      \n      // 只有當機器人在可見範圍內才繪製\n      if (robotDisplayX >= -100 && robotDisplayX <= displayWidth + 100 && \n          robotDisplayY >= -100 && robotDisplayY <= displayHeight + 100) {\n        \n        // 繪製機器人（紅色三角形）\n        const theta = parseFloat(currentPose.theta) * Math.PI / 180;\n        const size = Math.max(10, 15 * mapZoom);\n        \n        ctx.fillStyle = '#ef4444';\n        ctx.strokeStyle = '#dc2626';\n        ctx.lineWidth = 2;\n        \n        ctx.beginPath();\n        ctx.moveTo(\n          robotDisplayX + Math.cos(theta) * size,\n          robotDisplayY - Math.sin(theta) * size\n        );\n        ctx.lineTo(\n          robotDisplayX + Math.cos(theta + 2.5) * size * 0.6,\n          robotDisplayY - Math.sin(theta + 2.5) * size * 0.6\n        );\n        ctx.lineTo(\n          robotDisplayX + Math.cos(theta - 2.5) * size * 0.6,\n          robotDisplayY - Math.sin(theta - 2.5) * size * 0.6\n        );\n        ctx.closePath();\n        ctx.fill();\n        ctx.stroke();\n        \n        // 繪製機器人軌跡圓圈\n        ctx.strokeStyle = '#ef444480';\n        ctx.lineWidth = 1;\n        ctx.setLineDash([3, 3]);\n        ctx.beginPath();\n        ctx.arc(robotDisplayX, robotDisplayY, Math.max(20, 30 * mapZoom), 0, 2 * Math.PI);\n        ctx.stroke();\n        ctx.setLineDash([]);\n      }\n    }\n  }, [currentPose, mapZoom, mapOffset]);\n\n  const setupRosTopics = useCallback((rosInstance) => {\n    try {\n      cmdVelRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/cmd_vel',\n        messageType: 'geometry_msgs/Twist'\n      });\n\n      odomSubRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/odom',\n        messageType: 'nav_msgs/Odometry'\n      });\n\n      // 添加數據過濾，減少位置跳動\n      let lastPose = null;\n      odomSubRef.current.subscribe((message) => {\n        const { position, orientation } = message.pose.pose;\n        \n        const theta = 2 * Math.atan2(orientation.z, orientation.w);\n        \n        const newPose = {\n          x: parseFloat(position.x.toFixed(3)), // 增加精度\n          y: parseFloat(position.y.toFixed(3)),\n          theta: (theta * 180 / Math.PI).toFixed(1)\n        };\n        \n        // 只有當位置變化超過閾值時才更新，減少跳動\n        if (!lastPose || \n            Math.abs(newPose.x - lastPose.x) > 0.01 || \n            Math.abs(newPose.y - lastPose.y) > 0.01 ||\n            Math.abs(parseFloat(newPose.theta) - parseFloat(lastPose.theta)) > 1) {\n          \n          setCurrentPose(newPose);\n          lastPose = newPose;\n          \n          // 觸發地圖重繪\n          if (mapData) {\n            redrawMap(mapData);\n          }\n        }\n      });\n\n      mapSubRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/map',\n        messageType: 'nav_msgs/OccupancyGrid'\n      });\n\n      addLog('info', '正在訂閱地圖話題 /map...');\n      \n      mapSubRef.current.subscribe((message) => {\n        console.log('🗺️ 收到地圖數據!', {\n          width: message.info.width,\n          height: message.info.height,\n          resolution: message.info.resolution,\n          origin: message.info.origin,\n          dataLength: message.data ? message.data.length : 0\n        });\n        \n        if (message.data && message.data.length > 0) {\n          setMapData(message);\n          // 延遲繪製，確保狀態更新\n          setTimeout(() => {\n            if (mapCanvasRef.current) {\n              redrawMap(message);\n            }\n          }, 100);\n          addLog('success', `地圖更新: ${message.info.width}x${message.info.height}`);\n        }\n      });\n\n      const batterySimulation = setInterval(() => {\n        setBatteryLevel(prev => Math.max(20, prev - 0.1));\n      }, 10000);\n\n      rosInstance.batterySimulation = batterySimulation;\n      addLog('success', 'ROS 話題設置完成');\n    } catch (error) {\n      addLog('error', `話題設置失敗: ${error.message}`);\n    }\n  }, [addLog, redrawMap, mapData]);\n\n  // 繪製地圖到 Canvas\n  // 移除未使用的 drawMap 變數\n\n  // 初始化 ROS 連接 - 更穩定的版本\n  useEffect(() => {\n    if (window.ROSLIB) {\n      addLog('success', 'ROSLIB 已成功加載');\n    } else {\n      addLog('warning', 'ROSLIB 未加載，使用模擬模式');\n    }\n    \n    let reconnectTimer = null;\n    let isConnecting = false;\n    \n    const initAndSetupROS = () => {\n      if (isConnecting) return; // 防止重複連接\n      \n      try {\n        isConnecting = true;\n        // 清除之前的定時器\n        if (reconnectTimer) {\n          clearTimeout(reconnectTimer);\n        }\n        \n        // 關閉舊連接\n        if (rosRef.current) {\n          try {\n            rosRef.current.close();\n          } catch (e) {\n            console.log('關閉舊連接');\n          }\n        }\n        \n        const rosInstance = new ROSLIB.Ros({ \n          url: rosUrl,\n          groovyCompatibility: false\n        });\n\n        rosInstance.on('connection', () => {\n          isConnecting = false;\n          setRosConnected(true);\n          setRobotStatus('已連接');\n          addLog('success', 'ROS 連接成功');\n          \n          // 延遲設置話題，確保連接穩定\n          setTimeout(() => {\n            setupRosTopics(rosInstance);\n          }, 1000);\n        });\n\n        rosInstance.on('error', (error) => {\n          isConnecting = false;\n          console.error('ROS 連接錯誤:', error);\n          setRosConnected(false);\n          setRobotStatus('連接錯誤');\n          addLog('error', `連接錯誤，5秒後重試`);\n          \n          // 延長重連間隔，減少跳動\n          reconnectTimer = setTimeout(() => {\n            if (!rosRef.current || !rosRef.current.isConnected) {\n              addLog('info', '嘗試重新連接...');\n              initAndSetupROS();\n            }\n          }, 5000);\n        });\n\n        rosInstance.on('close', () => {\n          isConnecting = false;\n          setRosConnected(false);\n          setRobotStatus('連接斷開');\n          addLog('warning', 'ROS 連接斷開，3秒後重連');\n          \n          // 延長重連間隔\n          reconnectTimer = setTimeout(() => {\n            addLog('info', '嘗試重新連接...');\n            initAndSetupROS();\n          }, 3000);\n        });\n\n        rosRef.current = rosInstance;\n      } catch (error) {\n        isConnecting = false;\n        addLog('error', `初始化失敗: ${error.message}`);\n        \n        // 更長的重試間隔\n        reconnectTimer = setTimeout(() => {\n          addLog('info', '重試初始化...');\n          initAndSetupROS();\n        }, 10000);\n      }\n    };\n\n    initAndSetupROS();\n    \n    // 清理函數\n    return () => {\n      isConnecting = false;\n      if (reconnectTimer) {\n        clearTimeout(reconnectTimer);\n      }\n      if (rosRef.current) {\n        try {\n          rosRef.current.close();\n        } catch (e) {\n          console.log('清理連接');\n        }\n      }\n    };\n  }, [rosUrl, addLog, setupRosTopics]);\n\n  // 發送速度命令\n  const publishCmdVel = useCallback((linear, angular) => {\n    if (!rosConnected || !cmdVelRef.current) return;\n\n    const twist = new ROSLIB.Message({\n      linear: { x: linear, y: 0, z: 0 },\n      angular: { x: 0, y: 0, z: angular }\n    });\n\n    cmdVelRef.current.publish(twist);\n  }, [rosConnected]);\n\n  // 停止機器人\n  const stopRobot = useCallback(() => {\n    publishCmdVel(0, 0);\n    addLog('warning', '機器人停止');\n  }, [publishCmdVel, addLog]);\n\n  // 移動機器人\n  const moveRobot = useCallback((direction) => {\n    if (!rosConnected) {\n      addLog('error', '請先連接 ROS');\n      return;\n    }\n\n    let linear = 0, angular = 0;\n\n    switch (direction) {\n      case 'forward':\n        linear = speed;\n        break;\n      case 'backward':\n        linear = -speed;\n        break;\n      case 'left':\n        angular = angularSpeed;\n        break;\n      case 'right':\n        angular = -angularSpeed;\n        break;\n      case 'rotate_left':\n        angular = angularSpeed;\n        break;\n      case 'rotate_right':\n        angular = -angularSpeed;\n        break;\n      default:\n        break;\n    }\n\n    publishCmdVel(linear, angular);\n    addLog('info', `移動指令: 線速度=${linear.toFixed(2)}, 角速度=${angular.toFixed(2)}`);\n  }, [rosConnected, speed, angularSpeed, publishCmdVel, addLog]);\n\n  // 地圖縮放控制\n  const handleZoomIn = () => {\n    const newZoom = Math.min(5.0, mapZoom * 1.2);\n    setMapZoom(newZoom);\n    if (mapData) setTimeout(() => redrawMap(mapData), 10);\n  };\n\n  const handleZoomOut = () => {\n    const newZoom = Math.max(0.5, mapZoom * 0.8);\n    setMapZoom(newZoom);\n    if (mapData) setTimeout(() => redrawMap(mapData), 10);\n  };\n\n  // 重置地圖視圖\n  const resetMapView = () => {\n    setMapZoom(1.0);\n    setMapOffset({ x: 0, y: 0 });\n    if (mapData) setTimeout(() => redrawMap(mapData), 10);\n  };\n\n  // 滑鼠事件處理\n  const handleMapMouseDown = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsDragging(true);\n    setLastMousePos({ x: event.clientX, y: event.clientY });\n  };\n\n  const handleMapMouseMove = (event) => {\n    if (!isDragging) return;\n    \n    const deltaX = event.clientX - lastMousePos.x;\n    const deltaY = event.clientY - lastMousePos.y;\n    \n    setMapOffset(prev => ({\n      x: prev.x + deltaX,\n      y: prev.y + deltaY\n    }));\n    \n    setLastMousePos({ x: event.clientX, y: event.clientY });\n    \n    if (mapData) redrawMap(mapData);\n  };\n\n  const handleMapMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  // 滾輪縮放（防止頁面滾動）\n  const handleMapWheel = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    const delta = event.deltaY > 0 ? 0.9 : 1.1;\n    const newZoom = Math.max(0.5, Math.min(5.0, mapZoom * delta));\n    setMapZoom(newZoom);\n    \n    if (mapData) setTimeout(() => redrawMap(mapData), 10);\n  };\n\n  const initROS = () => {\n    // 強制重新加載頁面來重置所有連接\n    addLog('info', '重新初始化 ROS 連接...');\n    setTimeout(() => {\n      window.location.reload();\n    }, 500);\n  };\n\n  const getBatteryColor = () => {\n    if (batteryLevel > 60) return 'text-green-400';\n    if (batteryLevel > 30) return 'text-yellow-400';\n    return 'text-red-400';\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 relative overflow-hidden\">\n      {/* 狀態欄 */}\n      <div className=\"bg-blue-500 text-white px-4 py-2 flex justify-between items-center\">\n        <div className=\"flex items-center gap-4\">\n          <span className=\"font-semibold\">TurtleBot3 控制界面</span>\n          <div className=\"flex items-center gap-2\">\n            {rosConnected ? <Wifi className=\"w-4 h-4\" /> : <WifiOff className=\"w-4 h-4\" />}\n            <span className=\"text-sm\">{robotStatus}</span>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-4\">\n          <div className=\"flex items-center gap-2\">\n            <Battery className={`w-4 h-4 ${getBatteryColor()}`} />\n            <span className=\"text-sm\">{batteryLevel.toFixed(1)}%</span>\n          </div>\n          <div className=\"text-sm\">位置: ({currentPose.x}, {currentPose.y})</div>\n        </div>\n      </div>\n\n      {/* 主要地圖區域 */}\n      <div className=\"relative flex-1\" style={{ height: 'calc(100vh - 160px)' }}>\n        <canvas\n          ref={mapCanvasRef}\n          onMouseDown={handleMapMouseDown}\n          onMouseMove={handleMapMouseMove}\n          onMouseUp={handleMapMouseUp}\n          onMouseLeave={handleMapMouseUp}\n          onWheel={handleMapWheel}\n          className=\"w-full h-full cursor-move select-none bg-gray-200\"\n          style={{ touchAction: 'none' }}\n        />\n        \n        {/* 地圖控制按鈕 */}\n        <div className=\"absolute top-4 right-4 flex flex-col gap-2\">\n          <button\n            onClick={handleZoomIn}\n            className=\"w-10 h-10 bg-white border border-gray-300 rounded shadow hover:bg-gray-50 flex items-center justify-center\"\n            title=\"放大\"\n          >\n            <Plus className=\"w-5 h-5\" />\n          </button>\n          <button\n            onClick={handleZoomOut}\n            className=\"w-10 h-10 bg-white border border-gray-300 rounded shadow hover:bg-gray-50 flex items-center justify-center\"\n            title=\"縮小\"\n          >\n            <Minus className=\"w-5 h-5\" />\n          </button>\n          <button\n            onClick={resetMapView}\n            className=\"w-10 h-10 bg-white border border-gray-300 rounded shadow hover:bg-gray-50 flex items-center justify-center\"\n            title=\"重置視圖\"\n          >\n            <Home className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* 縮放顯示 */}\n        <div className=\"absolute top-4 left-4 bg-black/60 text-white px-3 py-2 rounded text-sm\">\n          縮放: {(mapZoom * 100).toFixed(0)}%\n        </div>\n\n        {/* 緊急停止按鈕 */}\n        <div className=\"absolute bottom-4 left-4\">\n          <button\n            onClick={stopRobot}\n            className=\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-bold text-lg shadow-lg\"\n          >\n            🛑 緊急停止\n          </button>\n        </div>\n      </div>\n\n      {/* 底部控制面板 */}\n      <div className=\"bg-white border-t border-gray-300 p-4\">\n        <div className=\"max-w-6xl mx-auto flex justify-between items-center\">\n          {/* 連接控制 */}\n          <div className=\"flex items-center gap-4\">\n            <input\n              type=\"text\"\n              value={rosUrl}\n              onChange={(e) => setRosUrl(e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 rounded text-sm\"\n              placeholder=\"ws://localhost:9090\"\n            />\n            <button\n              onClick={initROS}\n              disabled={rosConnected}\n              className=\"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded text-sm\"\n            >\n              {rosConnected ? '已連接' : '連接'}\n            </button>\n          </div>\n\n          {/* 速度控制 */}\n          <div className=\"flex items-center gap-6\">\n            <div className=\"text-center\">\n              <div className=\"text-sm text-gray-600 mb-1\">機器人速度</div>\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={() => setSpeed(Math.max(0.1, speed - 0.1))}\n                  className=\"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded flex items-center justify-center\"\n                >\n                  <Minus className=\"w-4 h-4\" />\n                </button>\n                <span className=\"text-sm font-mono w-16 text-center\">{speed.toFixed(1)} m/s</span>\n                <button\n                  onClick={() => setSpeed(Math.min(1.0, speed + 0.1))}\n                  className=\"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded flex items-center justify-center\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                </button>\n              </div>\n            </div>\n\n            <div className=\"text-center\">\n              <div className=\"text-sm text-gray-600 mb-1\">角速度</div>\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={() => setAngularSpeed(Math.max(0.1, angularSpeed - 0.1))}\n                  className=\"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded flex items-center justify-center\"\n                >\n                  <Minus className=\"w-4 h-4\" />\n                </button>\n                <span className=\"text-sm font-mono w-16 text-center\">{angularSpeed.toFixed(1)} rad/s</span>\n                <button\n                  onClick={() => setAngularSpeed(Math.min(2.0, angularSpeed + 0.1))}\n                  className=\"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded flex items-center justify-center\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* 方向控制 */}\n          <div className=\"flex items-center gap-4\">\n            <div className=\"grid grid-cols-3 gap-1\">\n              <div></div>\n              <button\n                onMouseDown={() => moveRobot('forward')}\n                onMouseUp={stopRobot}\n                disabled={!rosConnected}\n                className=\"w-12 h-12 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded flex items-center justify-center\"\n              >\n                <ArrowUp className=\"w-6 h-6\" />\n              </button>\n              <div></div>\n              \n              <button\n                onMouseDown={() => moveRobot('left')}\n                onMouseUp={stopRobot}\n                disabled={!rosConnected}\n                className=\"w-12 h-12 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded flex items-center justify-center\"\n              >\n                <ArrowLeft className=\"w-6 h-6\" />\n              </button>\n              <button\n                onClick={stopRobot}\n                className=\"w-12 h-12 bg-red-500 hover:bg-red-600 text-white rounded flex items-center justify-center\"\n              >\n                <Square className=\"w-6 h-6\" />\n              </button>\n              <button\n                onMouseDown={() => moveRobot('right')}\n                onMouseUp={stopRobot}\n                disabled={!rosConnected}\n                className=\"w-12 h-12 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded flex items-center justify-center\"\n              >\n                <ArrowRight className=\"w-6 h-6\" />\n              </button>\n              \n              <div></div>\n              <button\n                onMouseDown={() => moveRobot('backward')}\n                onMouseUp={stopRobot}\n                disabled={!rosConnected}\n                className=\"w-12 h-12 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white rounded flex items-center justify-center\"\n              >\n                <ArrowDown className=\"w-6 h-6\" />\n              </button>\n              <div></div>\n            </div>\n\n            <div className=\"flex flex-col gap-1\">\n              <button\n                onMouseDown={() => moveRobot('rotate_left')}\n                onMouseUp={stopRobot}\n                disabled={!rosConnected}\n                className=\"w-12 h-6 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white rounded flex items-center justify-center text-xs\"\n              >\n                <RotateCcw className=\"w-4 h-4\" />\n              </button>\n              <button\n                onMouseDown={() => moveRobot('rotate_right')}\n                onMouseUp={stopRobot}\n                disabled={!rosConnected}\n                className=\"w-12 h-6 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white rounded flex items-center justify-center text-xs\"\n              >\n                <RotateCw className=\"w-4 h-4\" />\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 載入提示 */}\n      {!mapData && (\n        <div className=\"absolute inset-0 flex items-center justify-center bg-black/20\">\n          <div className=\"bg-white p-6 rounded-lg shadow-lg text-center\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">等待地圖數據...</p>\n            <p className=\"text-sm text-gray-400 mt-2\">請確保 SLAM 節點正在運行</p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TurtleBotInterface;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}