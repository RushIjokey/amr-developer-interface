{"ast":null,"code":"var _jsxFileName = \"/home/leo/amr-developer-interface/src/components/AMRDeveloperInterface.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Square, ArrowUp, ArrowDown, ArrowLeft, ArrowRight, Battery, Camera, MapPin, Activity, Zap, AlertTriangle, CheckCircle, Clock, Target, Trash2, Map, Route, Flag, Home, Play, Pause, Save, RotateCw, RotateCcw, Wifi, WifiOff } from 'lucide-react';\n\n// 從全局變量獲取 ROSLIB\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ROSLIB = window.ROSLIB || (() => {\n  console.warn('ROSLIB 未加載，使用模擬模式');\n  return {\n    Ros: class {\n      constructor() {\n        this.isConnected = false;\n      }\n      connect() {\n        console.log('模擬 ROS 連接');\n        setTimeout(() => {\n          this.isConnected = true;\n          if (this.onConnection) this.onConnection();\n        }, 1000);\n      }\n      close() {\n        this.isConnected = false;\n      }\n      on() {}\n    },\n    Topic: class {\n      publish() {}\n      subscribe() {}\n    },\n    Service: class {\n      callService() {}\n    },\n    Message: class {\n      constructor(data) {\n        Object.assign(this, data);\n      }\n    }\n  };\n})();\nconst TurtleBotInterface = () => {\n  _s();\n  // ROS 連接狀態\n  const [rosConnected, setRosConnected] = useState(false);\n  const [rosUrl, setRosUrl] = useState('ws://localhost:9090');\n\n  // 機器人狀態\n  const [robotStatus, setRobotStatus] = useState('未連接');\n  const [batteryLevel, setBatteryLevel] = useState(85);\n  const [currentPose, setCurrentPose] = useState({\n    x: 0,\n    y: 0,\n    theta: 0\n  });\n  const [linearVel, setLinearVel] = useState(0);\n  const [angularVel, setAngularVel] = useState(0);\n  const [speed, setSpeed] = useState(0.2);\n  const [angularSpeed, setAngularSpeed] = useState(0.5);\n\n  // 地圖和導航\n  const [currentMode, setCurrentMode] = useState('teleop');\n  const [mapData, setMapData] = useState(null);\n  const [stations, setStations] = useState([{\n    id: 1,\n    name: '充電站',\n    x: 50,\n    y: 50,\n    type: 'charging',\n    color: 'bg-green-500'\n  }, {\n    id: 2,\n    name: '工作站A',\n    x: 300,\n    y: 80,\n    type: 'work',\n    color: 'bg-blue-500'\n  }, {\n    id: 3,\n    name: '工作站B',\n    x: 350,\n    y: 200,\n    type: 'work',\n    color: 'bg-blue-500'\n  }]);\n  const [waypoints, setWaypoints] = useState([{\n    id: 1,\n    x: 100,\n    y: 75,\n    order: 1\n  }, {\n    id: 2,\n    x: 250,\n    y: 120,\n    order: 2\n  }, {\n    id: 3,\n    x: 320,\n    y: 180,\n    order: 3\n  }]);\n  const [goalPose, setGoalPose] = useState(null);\n  const [isNavigating, setIsNavigating] = useState(false);\n  const [isMappingActive, setIsMappingActive] = useState(false);\n  const [isPatrolling, setIsPatrolling] = useState(false);\n  const [currentWaypointIndex, setCurrentWaypointIndex] = useState(0);\n\n  // 地圖縮放和拖拽狀態\n  const [mapZoom, setMapZoom] = useState(1.0);\n  const [mapOffset, setMapOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const [lastMousePos, setLastMousePos] = useState({\n    x: 0,\n    y: 0\n  });\n  const [newStationName, setNewStationName] = useState('');\n\n  // UI 狀態\n  const [logs, setLogs] = useState([{\n    time: new Date().toLocaleTimeString(),\n    type: 'info',\n    message: 'TurtleBot3 界面啟動'\n  }]);\n  const mapCanvasRef = useRef(null);\n  const cmdVelRef = useRef(null);\n  const mapSubRef = useRef(null);\n  const odomSubRef = useRef(null);\n  const rosRef = useRef(null);\n  const addLog = useCallback((type, message) => {\n    const time = new Date().toLocaleTimeString();\n    setLogs(prev => [...prev.slice(-9), {\n      time,\n      type,\n      message\n    }]);\n\n    // 同時廣播到其他窗口\n    try {\n      localStorage.setItem('amr_log_broadcast', JSON.stringify({\n        time,\n        type,\n        message,\n        timestamp: Date.now()\n      }));\n    } catch (e) {\n      console.log('無法廣播日誌');\n    }\n  }, []);\n\n  // 廣播機器人狀態到其他窗口\n  const broadcastRobotState = useCallback(() => {\n    try {\n      const robotState = {\n        pose: currentPose,\n        battery: batteryLevel,\n        status: robotStatus,\n        velocities: {\n          linear: linearVel,\n          angular: angularVel\n        },\n        connected: rosConnected,\n        timestamp: Date.now()\n      };\n      localStorage.setItem('amr_robot_state', JSON.stringify(robotState));\n    } catch (e) {\n      console.log('無法廣播機器人狀態');\n    }\n  }, [currentPose, batteryLevel, robotStatus, linearVel, angularVel, rosConnected]);\n\n  // 廣播日誌到其他窗口\n  const broadcastLogs = useCallback(() => {\n    try {\n      localStorage.setItem('amr_logs_state', JSON.stringify({\n        logs: logs,\n        timestamp: Date.now()\n      }));\n    } catch (e) {\n      console.log('無法廣播日誌狀態');\n    }\n  }, [logs]);\n\n  // 當狀態變化時廣播\n  useEffect(() => {\n    broadcastRobotState();\n  }, [broadcastRobotState]);\n  useEffect(() => {\n    broadcastLogs();\n  }, [broadcastLogs]);\n\n  // ROS 設定和繪圖函數\n  const setupRosTopics = useCallback(rosInstance => {\n    try {\n      cmdVelRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/cmd_vel',\n        messageType: 'geometry_msgs/Twist'\n      });\n      odomSubRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/odom',\n        messageType: 'nav_msgs/Odometry'\n      });\n      odomSubRef.current.subscribe(message => {\n        const {\n          position,\n          orientation\n        } = message.pose.pose;\n        const {\n          linear,\n          angular\n        } = message.twist.twist;\n        const theta = 2 * Math.atan2(orientation.z, orientation.w);\n        setCurrentPose({\n          x: parseFloat(position.x.toFixed(3)),\n          y: parseFloat(position.y.toFixed(3)),\n          theta: (theta * 180 / Math.PI).toFixed(1)\n        });\n        setLinearVel(linear.x.toFixed(2));\n        setAngularVel(angular.z.toFixed(2));\n      });\n      mapSubRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/map',\n        messageType: 'nav_msgs/OccupancyGrid'\n      });\n      addLog('info', '正在訂閱地圖話題 /map...');\n      mapSubRef.current.subscribe(message => {\n        if (message.data && message.data.length > 0) {\n          setMapData(message);\n          setTimeout(() => drawMap(message), 100);\n          addLog('success', `地圖更新: ${message.info.width}x${message.info.height}`);\n        }\n      });\n      const batterySimulation = setInterval(() => {\n        setBatteryLevel(prev => Math.max(20, prev - 0.1));\n      }, 10000);\n      rosInstance.batterySimulation = batterySimulation;\n      addLog('success', 'ROS 話題設置完成');\n    } catch (error) {\n      addLog('error', `話題設置失敗: ${error.message}`);\n    }\n  }, [addLog]);\n\n  // 繪製地圖\n  const drawMap = useCallback(mapMessage => {\n    const canvas = mapCanvasRef.current;\n    if (!canvas || !mapMessage) return;\n    const ctx = canvas.getContext('2d');\n    const {\n      width,\n      height,\n      resolution,\n      origin\n    } = mapMessage.info;\n    const {\n      data\n    } = mapMessage;\n    if (!data || data.length === 0) return;\n    const displayWidth = canvas.clientWidth || 800;\n    const displayHeight = canvas.clientHeight || 400;\n    canvas.width = displayWidth;\n    canvas.height = displayHeight;\n    ctx.fillStyle = '#374151';\n    ctx.fillRect(0, 0, displayWidth, displayHeight);\n    const baseScaleX = displayWidth / width;\n    const baseScaleY = displayHeight / height;\n    const baseScale = Math.min(baseScaleX, baseScaleY) * 0.8;\n    const finalScale = baseScale * mapZoom;\n    const centerX = displayWidth / 2;\n    const centerY = displayHeight / 2;\n    const offsetX = centerX - width * finalScale / 2 + mapOffset.x;\n    const offsetY = centerY - height * finalScale / 2 + mapOffset.y;\n\n    // 繪製地圖數據\n    for (let y = 0; y < height; y += 2) {\n      for (let x = 0; x < width; x += 2) {\n        const dataIndex = y * width + x;\n        const value = data[dataIndex];\n        if (value === -1) continue;\n        let color;\n        if (value >= 0 && value < 25) {\n          color = '#ffffff';\n        } else if (value >= 65) {\n          color = '#000000';\n        } else {\n          color = '#d1d5db';\n        }\n        const pixelX = offsetX + x * finalScale;\n        const pixelY = offsetY + y * finalScale;\n        if (pixelX >= 0 && pixelX < displayWidth && pixelY >= 0 && pixelY < displayHeight) {\n          ctx.fillStyle = color;\n          ctx.fillRect(pixelX, pixelY, Math.ceil(finalScale * 2), Math.ceil(finalScale * 2));\n        }\n      }\n    }\n\n    // 繪製站點\n    stations.forEach(station => {\n      const stationX = offsetX + station.x * finalScale;\n      const stationY = offsetY + station.y * finalScale;\n      ctx.fillStyle = station.type === 'charging' ? '#22c55e' : '#3b82f6';\n      ctx.beginPath();\n      ctx.arc(stationX, stationY, 8 * mapZoom, 0, 2 * Math.PI);\n      ctx.fill();\n    });\n\n    // 繪製航點和路徑\n    if (waypoints.length > 1) {\n      ctx.strokeStyle = '#10b981';\n      ctx.lineWidth = 2;\n      ctx.setLineDash([5, 5]);\n      for (let i = 0; i < waypoints.length; i++) {\n        const current = waypoints[i];\n        const next = waypoints[(i + 1) % waypoints.length];\n        const currentX = offsetX + current.x * finalScale;\n        const currentY = offsetY + current.y * finalScale;\n        const nextX = offsetX + next.x * finalScale;\n        const nextY = offsetY + next.y * finalScale;\n        ctx.beginPath();\n        ctx.moveTo(currentX, currentY);\n        ctx.lineTo(nextX, nextY);\n        ctx.stroke();\n      }\n      ctx.setLineDash([]);\n    }\n    waypoints.forEach((waypoint, index) => {\n      const wpX = offsetX + waypoint.x * finalScale;\n      const wpY = offsetY + waypoint.y * finalScale;\n      ctx.fillStyle = index === currentWaypointIndex && isPatrolling ? '#fbbf24' : '#10b981';\n      ctx.beginPath();\n      ctx.arc(wpX, wpY, 6 * mapZoom, 0, 2 * Math.PI);\n      ctx.fill();\n      ctx.fillStyle = 'white';\n      ctx.font = `${10 * mapZoom}px Arial`;\n      ctx.textAlign = 'center';\n      ctx.fillText(waypoint.order.toString(), wpX, wpY + 3);\n    });\n\n    // 繪製機器人\n    if (currentPose && currentPose.x !== undefined) {\n      const robotWorldX = parseFloat(currentPose.x);\n      const robotWorldY = parseFloat(currentPose.y);\n      const robotMapX = (robotWorldX - origin.position.x) / resolution;\n      const robotMapY = height - (robotWorldY - origin.position.y) / resolution;\n      const robotDisplayX = offsetX + robotMapX * finalScale;\n      const robotDisplayY = offsetY + robotMapY * finalScale;\n      if (robotDisplayX >= -50 && robotDisplayX <= displayWidth + 50 && robotDisplayY >= -50 && robotDisplayY <= displayHeight + 50) {\n        ctx.fillStyle = '#3b82f6';\n        ctx.strokeStyle = '#1e40af';\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n        ctx.arc(robotDisplayX, robotDisplayY, 8 * mapZoom, 0, 2 * Math.PI);\n        ctx.fill();\n        ctx.stroke();\n        const theta = parseFloat(currentPose.theta) * Math.PI / 180;\n        const arrowLength = 20 * mapZoom;\n        const arrowX = robotDisplayX + Math.cos(theta) * arrowLength;\n        const arrowY = robotDisplayY - Math.sin(theta) * arrowLength;\n        ctx.strokeStyle = '#1d4ed8';\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        ctx.moveTo(robotDisplayX, robotDisplayY);\n        ctx.lineTo(arrowX, arrowY);\n        ctx.stroke();\n        ctx.strokeStyle = '#10b981';\n        ctx.lineWidth = 2;\n        ctx.setLineDash([5, 5]);\n        ctx.beginPath();\n        ctx.arc(robotDisplayX, robotDisplayY, 40 * mapZoom, 0, 2 * Math.PI);\n        ctx.stroke();\n        ctx.setLineDash([]);\n      }\n    }\n\n    // 繪製目標位置\n    if (goalPose) {\n      const goalMapX = (goalPose.x - origin.position.x) / resolution;\n      const goalMapY = height - (goalPose.y - origin.position.y) / resolution;\n      const goalDisplayX = offsetX + goalMapX * finalScale;\n      const goalDisplayY = offsetY + goalMapY * finalScale;\n      ctx.fillStyle = '#ef4444';\n      ctx.beginPath();\n      ctx.arc(goalDisplayX, goalDisplayY, 6 * mapZoom, 0, 2 * Math.PI);\n      ctx.fill();\n    }\n  }, [currentPose, goalPose, mapZoom, mapOffset, stations, waypoints, currentWaypointIndex, isPatrolling]);\n\n  // ROS 初始化 - 修復版本\n  useEffect(() => {\n    if (window.ROSLIB) {\n      addLog('success', 'ROSLIB 已成功加載');\n      console.log('✅ ROSLIB 已成功加載');\n    } else {\n      addLog('warning', 'ROSLIB 未加載，使用模擬模式');\n      console.log('❌ ROSLIB 未加載');\n    }\n    let reconnectTimer = null;\n    let isConnecting = false;\n    const initAndSetupROS = () => {\n      if (isConnecting) {\n        console.log('⚠️ 已在連接中，跳過重複連接');\n        return;\n      }\n      try {\n        isConnecting = true;\n        console.log('🔄 開始初始化 ROS 連接...');\n\n        // 清除之前的定時器\n        if (reconnectTimer) {\n          clearTimeout(reconnectTimer);\n        }\n\n        // 關閉舊連接\n        if (rosRef.current) {\n          try {\n            rosRef.current.close();\n            console.log('🔒 關閉舊連接');\n          } catch (e) {\n            console.log('關閉舊連接時發生錯誤:', e);\n          }\n        }\n        console.log('🌐 創建新的 ROS 實例:', rosUrl);\n        const rosInstance = new ROSLIB.Ros({\n          url: rosUrl,\n          groovyCompatibility: false\n        });\n        rosInstance.on('connection', () => {\n          isConnecting = false;\n          console.log('✅ ROS 連接成功!');\n          setRosConnected(true);\n          setRobotStatus('已連接');\n          addLog('success', 'ROS 連接成功');\n\n          // 延遲設置話題，確保連接穩定\n          setTimeout(() => {\n            console.log('🔧 開始設置 ROS 話題...');\n            setupRosTopics(rosInstance);\n          }, 1000);\n        });\n        rosInstance.on('error', error => {\n          isConnecting = false;\n          console.error('❌ ROS 連接錯誤:', error);\n          setRosConnected(false);\n          setRobotStatus('連接錯誤');\n          addLog('error', '連接錯誤，5秒後重試');\n\n          // 延長重連間隔，減少跳動\n          reconnectTimer = setTimeout(() => {\n            if (!rosRef.current || !rosRef.current.isConnected) {\n              console.log('🔄 準備重新連接...');\n              addLog('info', '嘗試重新連接...');\n              initAndSetupROS();\n            }\n          }, 5000);\n        });\n        rosInstance.on('close', () => {\n          isConnecting = false;\n          console.log('⚠️ ROS 連接關閉');\n          setRosConnected(false);\n          setRobotStatus('連接斷開');\n          addLog('warning', 'ROS 連接斷開，3秒後重連');\n\n          // 延長重連間隔\n          reconnectTimer = setTimeout(() => {\n            console.log('🔄 準備重新連接...');\n            addLog('info', '嘗試重新連接...');\n            initAndSetupROS();\n          }, 3000);\n        });\n        rosRef.current = rosInstance;\n        console.log('📝 ROS 實例已保存到 ref');\n      } catch (error) {\n        isConnecting = false;\n        console.error('💥 初始化失敗:', error);\n        addLog('error', `初始化失敗: ${error.message}`);\n\n        // 更長的重試間隔\n        reconnectTimer = setTimeout(() => {\n          console.log('🔄 重試初始化...');\n          addLog('info', '重試初始化...');\n          initAndSetupROS();\n        }, 10000);\n      }\n    };\n\n    // 立即嘗試連接\n    console.log('🚀 啟動 ROS 初始化...');\n    initAndSetupROS();\n\n    // 清理函數\n    return () => {\n      console.log('🧹 清理 ROS 連接...');\n      isConnecting = false;\n      if (reconnectTimer) {\n        clearTimeout(reconnectTimer);\n      }\n      if (rosRef.current) {\n        try {\n          rosRef.current.close();\n        } catch (e) {\n          console.log('清理連接時發生錯誤:', e);\n        }\n      }\n    };\n  }, [rosUrl, addLog, setupRosTopics]);\n\n  // 控制函數\n  const publishCmdVel = useCallback((linear, angular) => {\n    if (!rosConnected || !cmdVelRef.current) return;\n    const twist = new ROSLIB.Message({\n      linear: {\n        x: linear,\n        y: 0,\n        z: 0\n      },\n      angular: {\n        x: 0,\n        y: 0,\n        z: angular\n      }\n    });\n    cmdVelRef.current.publish(twist);\n  }, [rosConnected]);\n  const stopRobot = useCallback(() => {\n    publishCmdVel(0, 0);\n    setIsNavigating(false);\n    setIsPatrolling(false);\n    addLog('warning', '機器人停止');\n  }, [publishCmdVel, addLog]);\n  const moveRobot = useCallback(direction => {\n    if (!rosConnected) {\n      addLog('error', '請先連接 ROS');\n      return;\n    }\n    let linear = 0,\n      angular = 0;\n    switch (direction) {\n      case 'forward':\n        linear = speed;\n        break;\n      case 'backward':\n        linear = -speed;\n        break;\n      case 'left':\n        angular = angularSpeed;\n        break;\n      case 'right':\n        angular = -angularSpeed;\n        break;\n      case 'rotate_left':\n        angular = angularSpeed;\n        break;\n      case 'rotate_right':\n        angular = -angularSpeed;\n        break;\n      default:\n        break;\n    }\n    publishCmdVel(linear, angular);\n    addLog('info', `移動指令: 線速度=${linear.toFixed(2)}, 角速度=${angular.toFixed(2)}`);\n  }, [rosConnected, speed, angularSpeed, publishCmdVel, addLog]);\n\n  // 地圖交互\n  const handleMapWheel = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    const delta = event.deltaY > 0 ? 0.9 : 1.1;\n    const newZoom = Math.max(0.5, Math.min(5.0, mapZoom * delta));\n    setMapZoom(newZoom);\n    if (mapData) setTimeout(() => drawMap(mapData), 10);\n  };\n  const handleMapMouseDown = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsDragging(true);\n    setLastMousePos({\n      x: event.clientX,\n      y: event.clientY\n    });\n  };\n  const handleMapMouseMove = event => {\n    if (!isDragging) return;\n    const deltaX = event.clientX - lastMousePos.x;\n    const deltaY = event.clientY - lastMousePos.y;\n    setMapOffset(prev => ({\n      x: prev.x + deltaX,\n      y: prev.y + deltaY\n    }));\n    setLastMousePos({\n      x: event.clientX,\n      y: event.clientY\n    });\n    if (mapData) drawMap(mapData);\n  };\n  const handleMapMouseUp = () => {\n    setIsDragging(false);\n  };\n  const resetMapView = () => {\n    setMapZoom(1.0);\n    setMapOffset({\n      x: 0,\n      y: 0\n    });\n    if (mapData) setTimeout(() => drawMap(mapData), 10);\n  };\n\n  // 地圖點擊處理\n  const handleMapClick = event => {\n    if (!mapData) return;\n    const canvas = mapCanvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    if (currentMode === 'mapping') {\n      if (newStationName.trim()) {\n        const newStation = {\n          id: Date.now(),\n          name: newStationName,\n          x: x,\n          y: y,\n          type: 'work',\n          color: 'bg-blue-500'\n        };\n        setStations(prev => [...prev, newStation]);\n        setNewStationName('');\n        addLog('success', `新增站點: ${newStation.name}`);\n      }\n    } else if (currentMode === 'waypoints') {\n      const newWaypoint = {\n        id: Date.now(),\n        x: x,\n        y: y,\n        order: waypoints.length + 1\n      };\n      setWaypoints(prev => [...prev, newWaypoint]);\n      addLog('success', `新增航點 ${newWaypoint.order}`);\n    } else if (currentMode === 'navigation') {\n      const worldX = x * mapData.info.resolution + mapData.info.origin.position.x;\n      const worldY = (canvas.height - y) * mapData.info.resolution + mapData.info.origin.position.y;\n      setGoalPose({\n        x: worldX,\n        y: worldY\n      });\n      addLog('info', `設置導航目標: (${worldX.toFixed(2)}, ${worldY.toFixed(2)})`);\n    }\n  };\n  const initROS = () => {\n    addLog('info', '重新初始化 ROS 連接...');\n    setTimeout(() => {\n      window.location.reload();\n    }, 500);\n  };\n  const getBatteryColor = () => {\n    if (batteryLevel > 60) return 'text-green-400';\n    if (batteryLevel > 30) return 'text-yellow-400';\n    return 'text-red-400';\n  };\n  const getStatusColor = () => {\n    if (robotStatus.includes('移動') || robotStatus.includes('導航') || robotStatus.includes('巡邏')) return 'text-blue-400';\n    if (robotStatus.includes('已到達') || robotStatus.includes('已連接')) return 'text-green-400';\n    if (robotStatus.includes('停止') || robotStatus.includes('錯誤')) return 'text-red-400';\n    if (robotStatus.includes('建圖')) return 'text-purple-400';\n    return 'text-gray-400';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-6 overflow-hidden\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-full max-w-7xl mx-auto flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-4xl font-bold text-white mb-2\",\n          children: \"AMR \\u667A\\u80FD\\u5C0E\\u822A\\u7CFB\\u7D71\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 684,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-300\",\n          children: \"\\u5EFA\\u5716 \\xB7 \\u5C0E\\u822A \\xB7 \\u5DE1\\u908F\\u63A7\\u5236\\u53F0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 683,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-4 mb-6 border border-white/20\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-300 mb-2\",\n              children: \"ROS Bridge URL\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 692,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: rosUrl,\n              onChange: e => setRosUrl(e.target.value),\n              className: \"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-gray-400\",\n              placeholder: \"ws://localhost:9090\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: initROS,\n            disabled: rosConnected,\n            className: \"px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\",\n            children: rosConnected ? '已連接' : '連接 ROS'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => window.open('/monitor', '_blank'),\n            className: \"px-6 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-all\",\n            children: \"\\u958B\\u555F\\u76E3\\u63A7\\u9801\\u9762\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 690,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 689,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center gap-2 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentMode('teleop'),\n          className: `px-4 py-2 rounded-lg font-medium transition-all ${currentMode === 'teleop' ? 'bg-blue-500 text-white' : 'bg-white/10 text-gray-300'}`,\n          children: \"\\u9059\\u63A7\\u6A21\\u5F0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 719,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentMode('mapping'),\n          className: `px-4 py-2 rounded-lg font-medium transition-all ${currentMode === 'mapping' ? 'bg-purple-500 text-white' : 'bg-white/10 text-gray-300'}`,\n          children: \"\\u5EFA\\u5716\\u6A21\\u5F0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 727,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentMode('waypoints'),\n          className: `px-4 py-2 rounded-lg font-medium transition-all ${currentMode === 'waypoints' ? 'bg-green-500 text-white' : 'bg-white/10 text-gray-300'}`,\n          children: \"\\u822A\\u9EDE\\u6A21\\u5F0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 735,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setCurrentMode('navigation'),\n          className: `px-4 py-2 rounded-lg font-medium transition-all ${currentMode === 'navigation' ? 'bg-orange-500 text-white' : 'bg-white/10 text-gray-300'}`,\n          children: \"\\u5C0E\\u822A\\u6A21\\u5F0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 743,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 718,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [rosConnected ? /*#__PURE__*/_jsxDEV(Wifi, {\n              className: \"w-8 h-8 text-green-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 757,\n              columnNumber: 31\n            }, this) : /*#__PURE__*/_jsxDEV(WifiOff, {\n              className: \"w-8 h-8 text-red-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 757,\n              columnNumber: 77\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"ROS \\u72C0\\u614B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 759,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: `font-semibold ${getStatusColor()}`,\n                children: robotStatus\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 760,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 758,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 756,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(Battery, {\n              className: `w-8 h-8 ${getBatteryColor()}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 767,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"\\u96FB\\u91CF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 769,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: `font-semibold ${getBatteryColor()}`,\n                children: [batteryLevel.toFixed(1), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 770,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 768,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(MapPin, {\n              className: \"w-8 h-8 text-purple-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 777,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"\\u4F4D\\u7F6E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 779,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-semibold text-purple-400\",\n                children: [\"(\", currentPose.x, \", \", currentPose.y, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 780,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 778,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 776,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 775,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(Activity, {\n              className: \"w-8 h-8 text-orange-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 789,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"\\u822A\\u9EDE\\u6578\\u91CF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 791,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"font-semibold text-orange-400\",\n                children: [waypoints.length, \" \\u500B\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 792,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 790,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 788,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 787,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 754,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6 min-h-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2 flex flex-col min-h-0\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 flex-1 flex flex-col min-h-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-xl font-semibold text-white flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(Map, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 805,\n                  columnNumber: 19\n                }, this), \"\\u667A\\u80FD\\u5730\\u5716\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 804,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: resetMapView,\n                  className: \"px-3 py-1 bg-blue-500/80 hover:bg-blue-600/80 text-white rounded text-sm transition-all\",\n                  title: \"\\u91CD\\u7F6E\\u8996\\u5716\",\n                  children: \"\\uD83D\\uDD04 \\u91CD\\u7F6E\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 809,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"px-3 py-1 bg-black/60 text-white rounded text-sm\",\n                  children: [(mapZoom * 100).toFixed(0), \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 816,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 808,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 803,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 bg-black/30 rounded-lg p-4 relative min-h-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n                ref: mapCanvasRef,\n                onClick: handleMapClick,\n                onWheel: handleMapWheel,\n                onMouseDown: handleMapMouseDown,\n                onMouseMove: handleMapMouseMove,\n                onMouseUp: handleMapMouseUp,\n                onMouseLeave: handleMapMouseUp,\n                className: \"w-full h-full bg-gray-800 rounded cursor-move select-none\",\n                style: {\n                  touchAction: 'none'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 823,\n                columnNumber: 17\n              }, this), !mapData && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute inset-0 flex items-center justify-center\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-gray-400 text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(MapPin, {\n                    className: \"w-12 h-12 mx-auto mb-2 opacity-50\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 838,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-lg mb-2\",\n                    children: \"\\u7B49\\u5F85\\u5730\\u5716\\u6578\\u64DA...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 839,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm\",\n                    children: \"\\u8ACB\\u78BA\\u4FDD SLAM \\u7BC0\\u9EDE\\u6B63\\u5728\\u904B\\u884C\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 840,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 837,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 836,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 822,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between text-xs text-gray-400 mt-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\uD83D\\uDD35 \\u6A5F\\u5668\\u4EBA \\uD83D\\uDD34 \\u76EE\\u6A19 \\uD83D\\uDFE2 \\u822A\\u9EDE \\uD83C\\uDFE0 \\u5145\\u96FB\\u7AD9 \\uD83D\\uDEA9 \\u5DE5\\u4F5C\\u7AD9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 847,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u6EFE\\u8F2A\\u7E2E\\u653E \\xB7 \\u62D6\\u62FD\\u79FB\\u52D5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 848,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 846,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 802,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 801,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6 overflow-y-auto\",\n          children: [currentMode === 'teleop' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold text-white mb-4\",\n              children: \"\\u9375\\u76E4\\u63A7\\u5236\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 858,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-3 gap-2 max-w-48 mx-auto mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 861,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onMouseDown: () => moveRobot('forward'),\n                onMouseUp: stopRobot,\n                disabled: !rosConnected,\n                className: \"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\",\n                children: /*#__PURE__*/_jsxDEV(ArrowUp, {\n                  className: \"w-6 h-6 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 868,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 862,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 870,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onMouseDown: () => moveRobot('left'),\n                onMouseUp: stopRobot,\n                disabled: !rosConnected,\n                className: \"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\",\n                children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                  className: \"w-6 h-6 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 878,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 872,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: stopRobot,\n                className: \"p-3 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-all\",\n                children: /*#__PURE__*/_jsxDEV(Square, {\n                  className: \"w-6 h-6 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 884,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 880,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onMouseDown: () => moveRobot('right'),\n                onMouseUp: stopRobot,\n                disabled: !rosConnected,\n                className: \"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\",\n                children: /*#__PURE__*/_jsxDEV(ArrowRight, {\n                  className: \"w-6 h-6 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 892,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 886,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 895,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onMouseDown: () => moveRobot('backward'),\n                onMouseUp: stopRobot,\n                disabled: !rosConnected,\n                className: \"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\",\n                children: /*#__PURE__*/_jsxDEV(ArrowDown, {\n                  className: \"w-6 h-6 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 902,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 896,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 904,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 860,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2 mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onMouseDown: () => moveRobot('rotate_left'),\n                onMouseUp: stopRobot,\n                disabled: !rosConnected,\n                className: \"flex-1 flex items-center justify-center gap-2 p-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 914,\n                  columnNumber: 21\n                }, this), \"\\u5DE6\\u8F49\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 908,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onMouseDown: () => moveRobot('rotate_right'),\n                onMouseUp: stopRobot,\n                disabled: !rosConnected,\n                className: \"flex-1 flex items-center justify-center gap-2 p-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(RotateCw, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 923,\n                  columnNumber: 21\n                }, this), \"\\u53F3\\u8F49\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 917,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 907,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-300 mb-2\",\n                  children: [\"\\u7DDA\\u901F\\u5EA6: \", speed.toFixed(1), \" m/s\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 930,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"range\",\n                  min: \"0.1\",\n                  max: \"1.0\",\n                  step: \"0.1\",\n                  value: speed,\n                  onChange: e => setSpeed(parseFloat(e.target.value)),\n                  className: \"w-full h-2 bg-white/20 rounded-lg appearance-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 933,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 929,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"block text-sm font-medium text-gray-300 mb-2\",\n                  children: [\"\\u89D2\\u901F\\u5EA6: \", angularSpeed.toFixed(1), \" rad/s\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 945,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"range\",\n                  min: \"0.1\",\n                  max: \"2.0\",\n                  step: \"0.1\",\n                  value: angularSpeed,\n                  onChange: e => setAngularSpeed(parseFloat(e.target.value)),\n                  className: \"w-full h-2 bg-white/20 rounded-lg appearance-none\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 948,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 944,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 928,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 857,\n            columnNumber: 15\n          }, this), currentMode === 'mapping' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold text-white mb-4\",\n              children: \"\\u5EFA\\u5716\\u5DE5\\u5177\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 965,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"\\u8F38\\u5165\\u7AD9\\u9EDE\\u540D\\u7A31\",\n                value: newStationName,\n                onChange: e => setNewStationName(e.target.value),\n                className: \"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 968,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"\\u9EDE\\u64CA\\u5730\\u5716\\u65B0\\u589E\\u7AD9\\u9EDE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 975,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setIsMappingActive(!isMappingActive),\n                disabled: !rosConnected,\n                className: `w-full flex items-center justify-center gap-2 px-4 py-3 ${isMappingActive ? 'bg-red-500 hover:bg-red-600' : 'bg-purple-500 hover:bg-purple-600'} disabled:bg-gray-600 text-white rounded-lg font-medium transition-all`,\n                children: [/*#__PURE__*/_jsxDEV(Map, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 984,\n                  columnNumber: 21\n                }, this), isMappingActive ? '停止建圖' : '開始建圖']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 977,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 967,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 964,\n            columnNumber: 15\n          }, this), currentMode === 'waypoints' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold text-white mb-4\",\n              children: \"\\u822A\\u9EDE\\u7BA1\\u7406\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 994,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  if (waypoints.length === 0) {\n                    addLog('error', '沒有設定航點，無法開始巡邏');\n                    return;\n                  }\n                  setIsPatrolling(!isPatrolling);\n                  if (!isPatrolling) {\n                    setCurrentWaypointIndex(0);\n                    addLog('info', '開始自動巡邏');\n                  } else {\n                    addLog('info', '停止巡邏');\n                  }\n                },\n                disabled: waypoints.length === 0 || !rosConnected,\n                className: \"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg font-medium transition-all\",\n                children: [isPatrolling ? /*#__PURE__*/_jsxDEV(Pause, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1014,\n                  columnNumber: 37\n                }, this) : /*#__PURE__*/_jsxDEV(Play, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1014,\n                  columnNumber: 69\n                }, this), isPatrolling ? '停止巡邏' : '開始巡邏']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 997,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"\\u9EDE\\u64CA\\u5730\\u5716\\u65B0\\u589E\\u822A\\u9EDE\\uFF0C\\u9EDE\\u64CA\\u822A\\u9EDE\\u522A\\u9664\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1017,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 996,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 993,\n            columnNumber: 15\n          }, this), currentMode === 'navigation' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold text-white mb-4\",\n              children: \"\\u81EA\\u4E3B\\u5C0E\\u822A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1025,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: [goalPose && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-black/20 rounded-lg p-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-300\",\n                  children: \"\\u76EE\\u6A19\\u4F4D\\u7F6E:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1030,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-white\",\n                  children: [\"(\", goalPose.x.toFixed(2), \", \", goalPose.y.toFixed(2), \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1031,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1029,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: stopRobot,\n                disabled: !rosConnected,\n                className: \"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white rounded-lg font-medium transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(Square, {\n                  className: \"w-5 h-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1040,\n                  columnNumber: 21\n                }, this), \"\\u505C\\u6B62\\u5C0E\\u822A\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1035,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-300\",\n                children: \"\\u9EDE\\u64CA\\u5730\\u5716\\u8A2D\\u7F6E\\u5C0E\\u822A\\u76EE\\u6A19\\u9EDE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1044,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1027,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1024,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold text-white mb-4\",\n              children: \"\\u7AD9\\u9EDE\\u7BA1\\u7406\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1053,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2 max-h-40 overflow-y-auto\",\n              children: stations.map(station => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between p-2 bg-white/10 rounded-lg\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `w-3 h-3 ${station.color} rounded`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1059,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-white text-sm\",\n                    children: station.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1060,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1058,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex gap-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    disabled: !rosConnected,\n                    className: \"p-1 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded text-xs transition-all\",\n                    children: \"\\u524D\\u5F80\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1063,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setStations(prev => prev.filter(s => s.id !== station.id)),\n                    className: \"p-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs transition-all\",\n                    children: /*#__PURE__*/_jsxDEV(Trash2, {\n                      className: \"w-3 h-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1073,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1069,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1062,\n                  columnNumber: 21\n                }, this)]\n              }, station.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1057,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1055,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1052,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-xl font-semibold text-white mb-4\",\n              children: \"\\u5FEB\\u901F\\u52D5\\u4F5C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1083,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  const chargingStation = stations.find(s => s.type === 'charging');\n                  if (chargingStation) {\n                    const worldX = chargingStation.x;\n                    const worldY = chargingStation.y;\n                    setGoalPose({\n                      x: worldX,\n                      y: worldY\n                    });\n                    addLog('info', `導航至充電站`);\n                  }\n                },\n                disabled: !rosConnected || !stations.find(s => s.type === 'charging'),\n                className: \"flex items-center justify-center gap-2 px-3 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(Home, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1099,\n                  columnNumber: 19\n                }, this), \"\\u56DE\\u5145\\u96FB\\u7AD9\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1086,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: stopRobot,\n                disabled: !rosConnected,\n                className: \"flex items-center justify-center gap-2 px-3 py-2 bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(Square, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1107,\n                  columnNumber: 19\n                }, this), \"\\u7DCA\\u6025\\u505C\\u6B62\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1102,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => window.open('http://localhost:8080', '_blank'),\n                className: \"flex items-center justify-center gap-2 px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm transition-all\",\n                children: [/*#__PURE__*/_jsxDEV(Camera, {\n                  className: \"w-4 h-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1114,\n                  columnNumber: 19\n                }, this), \"\\u651D\\u5F71\\u6A5F\\u8996\\u5716\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1110,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1085,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1082,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 854,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 799,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 681,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 680,\n    columnNumber: 5\n  }, this);\n};\n_s(TurtleBotInterface, \"okoPeMas0PqgJN1Gj3C9LZ3j1x8=\");\n_c = TurtleBotInterface;\nexport default TurtleBotInterface;\nvar _c;\n$RefreshReg$(_c, \"TurtleBotInterface\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Square","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Battery","Camera","MapPin","Activity","Zap","AlertTriangle","CheckCircle","Clock","Target","Trash2","Map","Route","Flag","Home","Play","Pause","Save","RotateCw","RotateCcw","Wifi","WifiOff","jsxDEV","_jsxDEV","ROSLIB","window","console","warn","Ros","constructor","isConnected","connect","log","setTimeout","onConnection","close","on","Topic","publish","subscribe","Service","callService","Message","data","Object","assign","TurtleBotInterface","_s","rosConnected","setRosConnected","rosUrl","setRosUrl","robotStatus","setRobotStatus","batteryLevel","setBatteryLevel","currentPose","setCurrentPose","x","y","theta","linearVel","setLinearVel","angularVel","setAngularVel","speed","setSpeed","angularSpeed","setAngularSpeed","currentMode","setCurrentMode","mapData","setMapData","stations","setStations","id","name","type","color","waypoints","setWaypoints","order","goalPose","setGoalPose","isNavigating","setIsNavigating","isMappingActive","setIsMappingActive","isPatrolling","setIsPatrolling","currentWaypointIndex","setCurrentWaypointIndex","mapZoom","setMapZoom","mapOffset","setMapOffset","isDragging","setIsDragging","lastMousePos","setLastMousePos","newStationName","setNewStationName","logs","setLogs","time","Date","toLocaleTimeString","message","mapCanvasRef","cmdVelRef","mapSubRef","odomSubRef","rosRef","addLog","prev","slice","localStorage","setItem","JSON","stringify","timestamp","now","e","broadcastRobotState","robotState","pose","battery","status","velocities","linear","angular","connected","broadcastLogs","setupRosTopics","rosInstance","current","ros","messageType","position","orientation","twist","Math","atan2","z","w","parseFloat","toFixed","PI","length","drawMap","info","width","height","batterySimulation","setInterval","max","error","mapMessage","canvas","ctx","getContext","resolution","origin","displayWidth","clientWidth","displayHeight","clientHeight","fillStyle","fillRect","baseScaleX","baseScaleY","baseScale","min","finalScale","centerX","centerY","offsetX","offsetY","dataIndex","value","pixelX","pixelY","ceil","forEach","station","stationX","stationY","beginPath","arc","fill","strokeStyle","lineWidth","setLineDash","i","next","currentX","currentY","nextX","nextY","moveTo","lineTo","stroke","waypoint","index","wpX","wpY","font","textAlign","fillText","toString","undefined","robotWorldX","robotWorldY","robotMapX","robotMapY","robotDisplayX","robotDisplayY","arrowLength","arrowX","cos","arrowY","sin","goalMapX","goalMapY","goalDisplayX","goalDisplayY","reconnectTimer","isConnecting","initAndSetupROS","clearTimeout","url","groovyCompatibility","publishCmdVel","stopRobot","moveRobot","direction","handleMapWheel","event","preventDefault","stopPropagation","delta","deltaY","newZoom","handleMapMouseDown","clientX","clientY","handleMapMouseMove","deltaX","handleMapMouseUp","resetMapView","handleMapClick","rect","getBoundingClientRect","left","top","trim","newStation","newWaypoint","worldX","worldY","initROS","location","reload","getBatteryColor","getStatusColor","includes","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","target","placeholder","onClick","disabled","open","title","ref","onWheel","onMouseDown","onMouseMove","onMouseUp","onMouseLeave","style","touchAction","step","map","filter","s","chargingStation","find","_c","$RefreshReg$"],"sources":["/home/leo/amr-developer-interface/src/components/AMRDeveloperInterface.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { \n  Square, \n  ArrowUp, \n  ArrowDown, \n  ArrowLeft, \n  ArrowRight,\n  Battery,\n  Camera,\n  MapPin,\n  Activity,\n  Zap,\n  AlertTriangle,\n  CheckCircle,\n  Clock,\n  Target,\n  Trash2,\n  Map,\n  Route,\n  Flag,\n  Home,\n  Play,\n  Pause,\n  Save,\n  RotateCw,\n  RotateCcw,\n  Wifi,\n  WifiOff\n} from 'lucide-react';\n\n// 從全局變量獲取 ROSLIB\nconst ROSLIB = window.ROSLIB || (() => {\n  console.warn('ROSLIB 未加載，使用模擬模式');\n  return {\n    Ros: class {\n      constructor() {\n        this.isConnected = false;\n      }\n      connect() {\n        console.log('模擬 ROS 連接');\n        setTimeout(() => {\n          this.isConnected = true;\n          if (this.onConnection) this.onConnection();\n        }, 1000);\n      }\n      close() {\n        this.isConnected = false;\n      }\n      on() {}\n    },\n    Topic: class {\n      publish() {}\n      subscribe() {}\n    },\n    Service: class {\n      callService() {}\n    },\n    Message: class {\n      constructor(data) {\n        Object.assign(this, data);\n      }\n    }\n  };\n})();\n\nconst TurtleBotInterface = () => {\n  // ROS 連接狀態\n  const [rosConnected, setRosConnected] = useState(false);\n  const [rosUrl, setRosUrl] = useState('ws://localhost:9090');\n  \n  // 機器人狀態\n  const [robotStatus, setRobotStatus] = useState('未連接');\n  const [batteryLevel, setBatteryLevel] = useState(85);\n  const [currentPose, setCurrentPose] = useState({ x: 0, y: 0, theta: 0 });\n  const [linearVel, setLinearVel] = useState(0);\n  const [angularVel, setAngularVel] = useState(0);\n  const [speed, setSpeed] = useState(0.2);\n  const [angularSpeed, setAngularSpeed] = useState(0.5);\n  \n  // 地圖和導航\n  const [currentMode, setCurrentMode] = useState('teleop');\n  const [mapData, setMapData] = useState(null);\n  const [stations, setStations] = useState([\n    { id: 1, name: '充電站', x: 50, y: 50, type: 'charging', color: 'bg-green-500' },\n    { id: 2, name: '工作站A', x: 300, y: 80, type: 'work', color: 'bg-blue-500' },\n    { id: 3, name: '工作站B', x: 350, y: 200, type: 'work', color: 'bg-blue-500' }\n  ]);\n  const [waypoints, setWaypoints] = useState([\n    { id: 1, x: 100, y: 75, order: 1 },\n    { id: 2, x: 250, y: 120, order: 2 },\n    { id: 3, x: 320, y: 180, order: 3 }\n  ]);\n  const [goalPose, setGoalPose] = useState(null);\n  const [isNavigating, setIsNavigating] = useState(false);\n  const [isMappingActive, setIsMappingActive] = useState(false);\n  const [isPatrolling, setIsPatrolling] = useState(false);\n  const [currentWaypointIndex, setCurrentWaypointIndex] = useState(0);\n  \n  // 地圖縮放和拖拽狀態\n  const [mapZoom, setMapZoom] = useState(1.0);\n  const [mapOffset, setMapOffset] = useState({ x: 0, y: 0 });\n  const [isDragging, setIsDragging] = useState(false);\n  const [lastMousePos, setLastMousePos] = useState({ x: 0, y: 0 });\n  const [newStationName, setNewStationName] = useState('');\n  \n  // UI 狀態\n  const [logs, setLogs] = useState([\n    { time: new Date().toLocaleTimeString(), type: 'info', message: 'TurtleBot3 界面啟動' }\n  ]);\n  \n  const mapCanvasRef = useRef(null);\n  const cmdVelRef = useRef(null);\n  const mapSubRef = useRef(null);\n  const odomSubRef = useRef(null);\n  const rosRef = useRef(null);\n\n  const addLog = useCallback((type, message) => {\n    const time = new Date().toLocaleTimeString();\n    setLogs(prev => [...prev.slice(-9), { time, type, message }]);\n    \n    // 同時廣播到其他窗口\n    try {\n      localStorage.setItem('amr_log_broadcast', JSON.stringify({\n        time, type, message, timestamp: Date.now()\n      }));\n    } catch (e) {\n      console.log('無法廣播日誌');\n    }\n  }, []);\n\n  // 廣播機器人狀態到其他窗口\n  const broadcastRobotState = useCallback(() => {\n    try {\n      const robotState = {\n        pose: currentPose,\n        battery: batteryLevel,\n        status: robotStatus,\n        velocities: { linear: linearVel, angular: angularVel },\n        connected: rosConnected,\n        timestamp: Date.now()\n      };\n      localStorage.setItem('amr_robot_state', JSON.stringify(robotState));\n    } catch (e) {\n      console.log('無法廣播機器人狀態');\n    }\n  }, [currentPose, batteryLevel, robotStatus, linearVel, angularVel, rosConnected]);\n\n  // 廣播日誌到其他窗口\n  const broadcastLogs = useCallback(() => {\n    try {\n      localStorage.setItem('amr_logs_state', JSON.stringify({\n        logs: logs,\n        timestamp: Date.now()\n      }));\n    } catch (e) {\n      console.log('無法廣播日誌狀態');\n    }\n  }, [logs]);\n\n  // 當狀態變化時廣播\n  useEffect(() => {\n    broadcastRobotState();\n  }, [broadcastRobotState]);\n\n  useEffect(() => {\n    broadcastLogs();\n  }, [broadcastLogs]);\n\n  // ROS 設定和繪圖函數\n  const setupRosTopics = useCallback((rosInstance) => {\n    try {\n      cmdVelRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/cmd_vel',\n        messageType: 'geometry_msgs/Twist'\n      });\n\n      odomSubRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/odom',\n        messageType: 'nav_msgs/Odometry'\n      });\n\n      odomSubRef.current.subscribe((message) => {\n        const { position, orientation } = message.pose.pose;\n        const { linear, angular } = message.twist.twist;\n        \n        const theta = 2 * Math.atan2(orientation.z, orientation.w);\n        \n        setCurrentPose({\n          x: parseFloat(position.x.toFixed(3)),\n          y: parseFloat(position.y.toFixed(3)),\n          theta: (theta * 180 / Math.PI).toFixed(1)\n        });\n        \n        setLinearVel(linear.x.toFixed(2));\n        setAngularVel(angular.z.toFixed(2));\n      });\n\n      mapSubRef.current = new ROSLIB.Topic({\n        ros: rosInstance,\n        name: '/map',\n        messageType: 'nav_msgs/OccupancyGrid'\n      });\n\n      addLog('info', '正在訂閱地圖話題 /map...');\n      \n      mapSubRef.current.subscribe((message) => {\n        if (message.data && message.data.length > 0) {\n          setMapData(message);\n          setTimeout(() => drawMap(message), 100);\n          addLog('success', `地圖更新: ${message.info.width}x${message.info.height}`);\n        }\n      });\n\n      const batterySimulation = setInterval(() => {\n        setBatteryLevel(prev => Math.max(20, prev - 0.1));\n      }, 10000);\n\n      rosInstance.batterySimulation = batterySimulation;\n      addLog('success', 'ROS 話題設置完成');\n    } catch (error) {\n      addLog('error', `話題設置失敗: ${error.message}`);\n    }\n  }, [addLog]);\n\n  // 繪製地圖\n  const drawMap = useCallback((mapMessage) => {\n    const canvas = mapCanvasRef.current;\n    if (!canvas || !mapMessage) return;\n\n    const ctx = canvas.getContext('2d');\n    const { width, height, resolution, origin } = mapMessage.info;\n    const { data } = mapMessage;\n    \n    if (!data || data.length === 0) return;\n\n    const displayWidth = canvas.clientWidth || 800;\n    const displayHeight = canvas.clientHeight || 400;\n    canvas.width = displayWidth;\n    canvas.height = displayHeight;\n    \n    ctx.fillStyle = '#374151';\n    ctx.fillRect(0, 0, displayWidth, displayHeight);\n    \n    const baseScaleX = displayWidth / width;\n    const baseScaleY = displayHeight / height;\n    const baseScale = Math.min(baseScaleX, baseScaleY) * 0.8;\n    const finalScale = baseScale * mapZoom;\n    \n    const centerX = displayWidth / 2;\n    const centerY = displayHeight / 2;\n    const offsetX = centerX - (width * finalScale) / 2 + mapOffset.x;\n    const offsetY = centerY - (height * finalScale) / 2 + mapOffset.y;\n    \n    // 繪製地圖數據\n    for (let y = 0; y < height; y += 2) {\n      for (let x = 0; x < width; x += 2) {\n        const dataIndex = y * width + x;\n        const value = data[dataIndex];\n        \n        if (value === -1) continue;\n        \n        let color;\n        if (value >= 0 && value < 25) {\n          color = '#ffffff';\n        } else if (value >= 65) {\n          color = '#000000';\n        } else {\n          color = '#d1d5db';\n        }\n        \n        const pixelX = offsetX + x * finalScale;\n        const pixelY = offsetY + y * finalScale;\n        \n        if (pixelX >= 0 && pixelX < displayWidth && pixelY >= 0 && pixelY < displayHeight) {\n          ctx.fillStyle = color;\n          ctx.fillRect(pixelX, pixelY, Math.ceil(finalScale * 2), Math.ceil(finalScale * 2));\n        }\n      }\n    }\n    \n    // 繪製站點\n    stations.forEach(station => {\n      const stationX = offsetX + station.x * finalScale;\n      const stationY = offsetY + station.y * finalScale;\n      \n      ctx.fillStyle = station.type === 'charging' ? '#22c55e' : '#3b82f6';\n      ctx.beginPath();\n      ctx.arc(stationX, stationY, 8 * mapZoom, 0, 2 * Math.PI);\n      ctx.fill();\n    });\n    \n    // 繪製航點和路徑\n    if (waypoints.length > 1) {\n      ctx.strokeStyle = '#10b981';\n      ctx.lineWidth = 2;\n      ctx.setLineDash([5, 5]);\n      \n      for (let i = 0; i < waypoints.length; i++) {\n        const current = waypoints[i];\n        const next = waypoints[(i + 1) % waypoints.length];\n        \n        const currentX = offsetX + current.x * finalScale;\n        const currentY = offsetY + current.y * finalScale;\n        const nextX = offsetX + next.x * finalScale;\n        const nextY = offsetY + next.y * finalScale;\n        \n        ctx.beginPath();\n        ctx.moveTo(currentX, currentY);\n        ctx.lineTo(nextX, nextY);\n        ctx.stroke();\n      }\n      ctx.setLineDash([]);\n    }\n    \n    waypoints.forEach((waypoint, index) => {\n      const wpX = offsetX + waypoint.x * finalScale;\n      const wpY = offsetY + waypoint.y * finalScale;\n      \n      ctx.fillStyle = index === currentWaypointIndex && isPatrolling ? '#fbbf24' : '#10b981';\n      ctx.beginPath();\n      ctx.arc(wpX, wpY, 6 * mapZoom, 0, 2 * Math.PI);\n      ctx.fill();\n      \n      ctx.fillStyle = 'white';\n      ctx.font = `${10 * mapZoom}px Arial`;\n      ctx.textAlign = 'center';\n      ctx.fillText(waypoint.order.toString(), wpX, wpY + 3);\n    });\n    \n    // 繪製機器人\n    if (currentPose && currentPose.x !== undefined) {\n      const robotWorldX = parseFloat(currentPose.x);\n      const robotWorldY = parseFloat(currentPose.y);\n      \n      const robotMapX = (robotWorldX - origin.position.x) / resolution;\n      const robotMapY = height - (robotWorldY - origin.position.y) / resolution;\n      \n      const robotDisplayX = offsetX + robotMapX * finalScale;\n      const robotDisplayY = offsetY + robotMapY * finalScale;\n      \n      if (robotDisplayX >= -50 && robotDisplayX <= displayWidth + 50 && \n          robotDisplayY >= -50 && robotDisplayY <= displayHeight + 50) {\n        \n        ctx.fillStyle = '#3b82f6';\n        ctx.strokeStyle = '#1e40af';\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n        ctx.arc(robotDisplayX, robotDisplayY, 8 * mapZoom, 0, 2 * Math.PI);\n        ctx.fill();\n        ctx.stroke();\n        \n        const theta = parseFloat(currentPose.theta) * Math.PI / 180;\n        const arrowLength = 20 * mapZoom;\n        const arrowX = robotDisplayX + Math.cos(theta) * arrowLength;\n        const arrowY = robotDisplayY - Math.sin(theta) * arrowLength;\n        \n        ctx.strokeStyle = '#1d4ed8';\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        ctx.moveTo(robotDisplayX, robotDisplayY);\n        ctx.lineTo(arrowX, arrowY);\n        ctx.stroke();\n        \n        ctx.strokeStyle = '#10b981';\n        ctx.lineWidth = 2;\n        ctx.setLineDash([5, 5]);\n        ctx.beginPath();\n        ctx.arc(robotDisplayX, robotDisplayY, 40 * mapZoom, 0, 2 * Math.PI);\n        ctx.stroke();\n        ctx.setLineDash([]);\n      }\n    }\n    \n    // 繪製目標位置\n    if (goalPose) {\n      const goalMapX = (goalPose.x - origin.position.x) / resolution;\n      const goalMapY = height - (goalPose.y - origin.position.y) / resolution;\n      \n      const goalDisplayX = offsetX + goalMapX * finalScale;\n      const goalDisplayY = offsetY + goalMapY * finalScale;\n      \n      ctx.fillStyle = '#ef4444';\n      ctx.beginPath();\n      ctx.arc(goalDisplayX, goalDisplayY, 6 * mapZoom, 0, 2 * Math.PI);\n      ctx.fill();\n    }\n  }, [currentPose, goalPose, mapZoom, mapOffset, stations, waypoints, currentWaypointIndex, isPatrolling]);\n\n  // ROS 初始化 - 修復版本\n  useEffect(() => {\n    if (window.ROSLIB) {\n      addLog('success', 'ROSLIB 已成功加載');\n      console.log('✅ ROSLIB 已成功加載');\n    } else {\n      addLog('warning', 'ROSLIB 未加載，使用模擬模式');\n      console.log('❌ ROSLIB 未加載');\n    }\n    \n    let reconnectTimer = null;\n    let isConnecting = false;\n    \n    const initAndSetupROS = () => {\n      if (isConnecting) {\n        console.log('⚠️ 已在連接中，跳過重複連接');\n        return;\n      }\n      \n      try {\n        isConnecting = true;\n        console.log('🔄 開始初始化 ROS 連接...');\n        \n        // 清除之前的定時器\n        if (reconnectTimer) {\n          clearTimeout(reconnectTimer);\n        }\n        \n        // 關閉舊連接\n        if (rosRef.current) {\n          try {\n            rosRef.current.close();\n            console.log('🔒 關閉舊連接');\n          } catch (e) {\n            console.log('關閉舊連接時發生錯誤:', e);\n          }\n        }\n        \n        console.log('🌐 創建新的 ROS 實例:', rosUrl);\n        const rosInstance = new ROSLIB.Ros({ \n          url: rosUrl,\n          groovyCompatibility: false\n        });\n\n        rosInstance.on('connection', () => {\n          isConnecting = false;\n          console.log('✅ ROS 連接成功!');\n          setRosConnected(true);\n          setRobotStatus('已連接');\n          addLog('success', 'ROS 連接成功');\n          \n          // 延遲設置話題，確保連接穩定\n          setTimeout(() => {\n            console.log('🔧 開始設置 ROS 話題...');\n            setupRosTopics(rosInstance);\n          }, 1000);\n        });\n\n        rosInstance.on('error', (error) => {\n          isConnecting = false;\n          console.error('❌ ROS 連接錯誤:', error);\n          setRosConnected(false);\n          setRobotStatus('連接錯誤');\n          addLog('error', '連接錯誤，5秒後重試');\n          \n          // 延長重連間隔，減少跳動\n          reconnectTimer = setTimeout(() => {\n            if (!rosRef.current || !rosRef.current.isConnected) {\n              console.log('🔄 準備重新連接...');\n              addLog('info', '嘗試重新連接...');\n              initAndSetupROS();\n            }\n          }, 5000);\n        });\n\n        rosInstance.on('close', () => {\n          isConnecting = false;\n          console.log('⚠️ ROS 連接關閉');\n          setRosConnected(false);\n          setRobotStatus('連接斷開');\n          addLog('warning', 'ROS 連接斷開，3秒後重連');\n          \n          // 延長重連間隔\n          reconnectTimer = setTimeout(() => {\n            console.log('🔄 準備重新連接...');\n            addLog('info', '嘗試重新連接...');\n            initAndSetupROS();\n          }, 3000);\n        });\n\n        rosRef.current = rosInstance;\n        console.log('📝 ROS 實例已保存到 ref');\n        \n      } catch (error) {\n        isConnecting = false;\n        console.error('💥 初始化失敗:', error);\n        addLog('error', `初始化失敗: ${error.message}`);\n        \n        // 更長的重試間隔\n        reconnectTimer = setTimeout(() => {\n          console.log('🔄 重試初始化...');\n          addLog('info', '重試初始化...');\n          initAndSetupROS();\n        }, 10000);\n      }\n    };\n\n    // 立即嘗試連接\n    console.log('🚀 啟動 ROS 初始化...');\n    initAndSetupROS();\n    \n    // 清理函數\n    return () => {\n      console.log('🧹 清理 ROS 連接...');\n      isConnecting = false;\n      if (reconnectTimer) {\n        clearTimeout(reconnectTimer);\n      }\n      if (rosRef.current) {\n        try {\n          rosRef.current.close();\n        } catch (e) {\n          console.log('清理連接時發生錯誤:', e);\n        }\n      }\n    };\n  }, [rosUrl, addLog, setupRosTopics]);\n\n  // 控制函數\n  const publishCmdVel = useCallback((linear, angular) => {\n    if (!rosConnected || !cmdVelRef.current) return;\n\n    const twist = new ROSLIB.Message({\n      linear: { x: linear, y: 0, z: 0 },\n      angular: { x: 0, y: 0, z: angular }\n    });\n\n    cmdVelRef.current.publish(twist);\n  }, [rosConnected]);\n\n  const stopRobot = useCallback(() => {\n    publishCmdVel(0, 0);\n    setIsNavigating(false);\n    setIsPatrolling(false);\n    addLog('warning', '機器人停止');\n  }, [publishCmdVel, addLog]);\n\n  const moveRobot = useCallback((direction) => {\n    if (!rosConnected) {\n      addLog('error', '請先連接 ROS');\n      return;\n    }\n\n    let linear = 0, angular = 0;\n\n    switch (direction) {\n      case 'forward':\n        linear = speed;\n        break;\n      case 'backward':\n        linear = -speed;\n        break;\n      case 'left':\n        angular = angularSpeed;\n        break;\n      case 'right':\n        angular = -angularSpeed;\n        break;\n      case 'rotate_left':\n        angular = angularSpeed;\n        break;\n      case 'rotate_right':\n        angular = -angularSpeed;\n        break;\n      default:\n        break;\n    }\n\n    publishCmdVel(linear, angular);\n    addLog('info', `移動指令: 線速度=${linear.toFixed(2)}, 角速度=${angular.toFixed(2)}`);\n  }, [rosConnected, speed, angularSpeed, publishCmdVel, addLog]);\n\n  // 地圖交互\n  const handleMapWheel = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    const delta = event.deltaY > 0 ? 0.9 : 1.1;\n    const newZoom = Math.max(0.5, Math.min(5.0, mapZoom * delta));\n    setMapZoom(newZoom);\n    \n    if (mapData) setTimeout(() => drawMap(mapData), 10);\n  };\n\n  const handleMapMouseDown = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsDragging(true);\n    setLastMousePos({ x: event.clientX, y: event.clientY });\n  };\n\n  const handleMapMouseMove = (event) => {\n    if (!isDragging) return;\n    \n    const deltaX = event.clientX - lastMousePos.x;\n    const deltaY = event.clientY - lastMousePos.y;\n    \n    setMapOffset(prev => ({\n      x: prev.x + deltaX,\n      y: prev.y + deltaY\n    }));\n    \n    setLastMousePos({ x: event.clientX, y: event.clientY });\n    \n    if (mapData) drawMap(mapData);\n  };\n\n  const handleMapMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  const resetMapView = () => {\n    setMapZoom(1.0);\n    setMapOffset({ x: 0, y: 0 });\n    if (mapData) setTimeout(() => drawMap(mapData), 10);\n  };\n\n  // 地圖點擊處理\n  const handleMapClick = (event) => {\n    if (!mapData) return;\n\n    const canvas = mapCanvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n\n    if (currentMode === 'mapping') {\n      if (newStationName.trim()) {\n        const newStation = {\n          id: Date.now(),\n          name: newStationName,\n          x: x,\n          y: y,\n          type: 'work',\n          color: 'bg-blue-500'\n        };\n        setStations(prev => [...prev, newStation]);\n        setNewStationName('');\n        addLog('success', `新增站點: ${newStation.name}`);\n      }\n    } else if (currentMode === 'waypoints') {\n      const newWaypoint = {\n        id: Date.now(),\n        x: x,\n        y: y,\n        order: waypoints.length + 1\n      };\n      setWaypoints(prev => [...prev, newWaypoint]);\n      addLog('success', `新增航點 ${newWaypoint.order}`);\n    } else if (currentMode === 'navigation') {\n      const worldX = x * mapData.info.resolution + mapData.info.origin.position.x;\n      const worldY = (canvas.height - y) * mapData.info.resolution + mapData.info.origin.position.y;\n      setGoalPose({ x: worldX, y: worldY });\n      addLog('info', `設置導航目標: (${worldX.toFixed(2)}, ${worldY.toFixed(2)})`);\n    }\n  };\n\n  const initROS = () => {\n    addLog('info', '重新初始化 ROS 連接...');\n    setTimeout(() => {\n      window.location.reload();\n    }, 500);\n  };\n\n  const getBatteryColor = () => {\n    if (batteryLevel > 60) return 'text-green-400';\n    if (batteryLevel > 30) return 'text-yellow-400';\n    return 'text-red-400';\n  };\n\n  const getStatusColor = () => {\n    if (robotStatus.includes('移動') || robotStatus.includes('導航') || robotStatus.includes('巡邏')) return 'text-blue-400';\n    if (robotStatus.includes('已到達') || robotStatus.includes('已連接')) return 'text-green-400';\n    if (robotStatus.includes('停止') || robotStatus.includes('錯誤')) return 'text-red-400';\n    if (robotStatus.includes('建圖')) return 'text-purple-400';\n    return 'text-gray-400';\n  };\n\n  return (\n    <div className=\"h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-6 overflow-hidden\">\n      <div className=\"h-full max-w-7xl mx-auto flex flex-col\">\n        {/* 標題 */}\n        <div className=\"text-center mb-6\">\n          <h1 className=\"text-4xl font-bold text-white mb-2\">AMR 智能導航系統</h1>\n          <p className=\"text-gray-300\">建圖 · 導航 · 巡邏控制台</p>\n        </div>\n\n        {/* ROS 連接設定 */}\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-4 mb-6 border border-white/20\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex-1\">\n              <label className=\"block text-sm font-medium text-gray-300 mb-2\">ROS Bridge URL</label>\n              <input\n                type=\"text\"\n                value={rosUrl}\n                onChange={(e) => setRosUrl(e.target.value)}\n                className=\"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-gray-400\"\n                placeholder=\"ws://localhost:9090\"\n              />\n            </div>\n            <button\n              onClick={initROS}\n              disabled={rosConnected}\n              className=\"px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\"\n            >\n              {rosConnected ? '已連接' : '連接 ROS'}\n            </button>\n            <button\n              onClick={() => window.open('/monitor', '_blank')}\n              className=\"px-6 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-all\"\n            >\n              開啟監控頁面\n            </button>\n          </div>\n        </div>\n\n        {/* 模式切換 */}\n        <div className=\"flex justify-center gap-2 mb-6\">\n          <button\n            onClick={() => setCurrentMode('teleop')}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              currentMode === 'teleop' ? 'bg-blue-500 text-white' : 'bg-white/10 text-gray-300'\n            }`}\n          >\n            遙控模式\n          </button>\n          <button\n            onClick={() => setCurrentMode('mapping')}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              currentMode === 'mapping' ? 'bg-purple-500 text-white' : 'bg-white/10 text-gray-300'\n            }`}\n          >\n            建圖模式\n          </button>\n          <button\n            onClick={() => setCurrentMode('waypoints')}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              currentMode === 'waypoints' ? 'bg-green-500 text-white' : 'bg-white/10 text-gray-300'\n            }`}\n          >\n            航點模式\n          </button>\n          <button\n            onClick={() => setCurrentMode('navigation')}\n            className={`px-4 py-2 rounded-lg font-medium transition-all ${\n              currentMode === 'navigation' ? 'bg-orange-500 text-white' : 'bg-white/10 text-gray-300'\n            }`}\n          >\n            導航模式\n          </button>\n        </div>\n\n        {/* 狀態概覽 */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n          <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n            <div className=\"flex items-center gap-3\">\n              {rosConnected ? <Wifi className=\"w-8 h-8 text-green-400\" /> : <WifiOff className=\"w-8 h-8 text-red-400\" />}\n              <div>\n                <p className=\"text-sm text-gray-300\">ROS 狀態</p>\n                <p className={`font-semibold ${getStatusColor()}`}>{robotStatus}</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n            <div className=\"flex items-center gap-3\">\n              <Battery className={`w-8 h-8 ${getBatteryColor()}`} />\n              <div>\n                <p className=\"text-sm text-gray-300\">電量</p>\n                <p className={`font-semibold ${getBatteryColor()}`}>{batteryLevel.toFixed(1)}%</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n            <div className=\"flex items-center gap-3\">\n              <MapPin className=\"w-8 h-8 text-purple-400\" />\n              <div>\n                <p className=\"text-sm text-gray-300\">位置</p>\n                <p className=\"font-semibold text-purple-400\">\n                  ({currentPose.x}, {currentPose.y})\n                </p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n            <div className=\"flex items-center gap-3\">\n              <Activity className=\"w-8 h-8 text-orange-400\" />\n              <div>\n                <p className=\"text-sm text-gray-300\">航點數量</p>\n                <p className=\"font-semibold text-orange-400\">{waypoints.length} 個</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* 主要內容區域 - 使用 flex-1 填滿剩餘空間 */}\n        <div className=\"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6 min-h-0\">\n          {/* 地圖區域 */}\n          <div className=\"lg:col-span-2 flex flex-col min-h-0\">\n            <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20 flex-1 flex flex-col min-h-0\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-xl font-semibold text-white flex items-center gap-2\">\n                  <Map className=\"w-5 h-5\" />\n                  智能地圖\n                </h2>\n                <div className=\"flex gap-2\">\n                  <button\n                    onClick={resetMapView}\n                    className=\"px-3 py-1 bg-blue-500/80 hover:bg-blue-600/80 text-white rounded text-sm transition-all\"\n                    title=\"重置視圖\"\n                  >\n                    🔄 重置\n                  </button>\n                  <div className=\"px-3 py-1 bg-black/60 text-white rounded text-sm\">\n                    {(mapZoom * 100).toFixed(0)}%\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"flex-1 bg-black/30 rounded-lg p-4 relative min-h-0\">\n                <canvas\n                  ref={mapCanvasRef}\n                  onClick={handleMapClick}\n                  onWheel={handleMapWheel}\n                  onMouseDown={handleMapMouseDown}\n                  onMouseMove={handleMapMouseMove}\n                  onMouseUp={handleMapMouseUp}\n                  onMouseLeave={handleMapMouseUp}\n                  className=\"w-full h-full bg-gray-800 rounded cursor-move select-none\"\n                  style={{ touchAction: 'none' }}\n                />\n                \n                {!mapData && (\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <div className=\"text-gray-400 text-center\">\n                      <MapPin className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n                      <p className=\"text-lg mb-2\">等待地圖數據...</p>\n                      <p className=\"text-sm\">請確保 SLAM 節點正在運行</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"flex justify-between text-xs text-gray-400 mt-2\">\n                <span>🔵 機器人 🔴 目標 🟢 航點 🏠 充電站 🚩 工作站</span>\n                <span>滾輪縮放 · 拖拽移動</span>\n              </div>\n            </div>\n          </div>\n\n          {/* 控制面板 */}\n          <div className=\"space-y-6 overflow-y-auto\">\n            {/* 遙控模式 */}\n            {currentMode === 'teleop' && (\n              <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\">\n                <h2 className=\"text-xl font-semibold text-white mb-4\">鍵盤控制</h2>\n                \n                <div className=\"grid grid-cols-3 gap-2 max-w-48 mx-auto mb-4\">\n                  <div></div>\n                  <button \n                    onMouseDown={() => moveRobot('forward')}\n                    onMouseUp={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\"\n                  >\n                    <ArrowUp className=\"w-6 h-6 mx-auto\" />\n                  </button>\n                  <div></div>\n                  \n                  <button \n                    onMouseDown={() => moveRobot('left')}\n                    onMouseUp={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\"\n                  >\n                    <ArrowLeft className=\"w-6 h-6 mx-auto\" />\n                  </button>\n                  <button \n                    onClick={stopRobot}\n                    className=\"p-3 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-all\"\n                  >\n                    <Square className=\"w-6 h-6 mx-auto\" />\n                  </button>\n                  <button \n                    onMouseDown={() => moveRobot('right')}\n                    onMouseUp={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\"\n                  >\n                    <ArrowRight className=\"w-6 h-6 mx-auto\" />\n                  </button>\n                  \n                  <div></div>\n                  <button \n                    onMouseDown={() => moveRobot('backward')}\n                    onMouseUp={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"p-3 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded-lg transition-all\"\n                  >\n                    <ArrowDown className=\"w-6 h-6 mx-auto\" />\n                  </button>\n                  <div></div>\n                </div>\n                \n                <div className=\"flex gap-2 mb-4\">\n                  <button \n                    onMouseDown={() => moveRobot('rotate_left')}\n                    onMouseUp={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"flex-1 flex items-center justify-center gap-2 p-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\"\n                  >\n                    <RotateCcw className=\"w-4 h-4\" />\n                    左轉\n                  </button>\n                  <button \n                    onMouseDown={() => moveRobot('rotate_right')}\n                    onMouseUp={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"flex-1 flex items-center justify-center gap-2 p-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\"\n                  >\n                    <RotateCw className=\"w-4 h-4\" />\n                    右轉\n                  </button>\n                </div>\n                \n                <div className=\"space-y-3\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      線速度: {speed.toFixed(1)} m/s\n                    </label>\n                    <input\n                      type=\"range\"\n                      min=\"0.1\"\n                      max=\"1.0\"\n                      step=\"0.1\"\n                      value={speed}\n                      onChange={(e) => setSpeed(parseFloat(e.target.value))}\n                      className=\"w-full h-2 bg-white/20 rounded-lg appearance-none\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      角速度: {angularSpeed.toFixed(1)} rad/s\n                    </label>\n                    <input\n                      type=\"range\"\n                      min=\"0.1\"\n                      max=\"2.0\"\n                      step=\"0.1\"\n                      value={angularSpeed}\n                      onChange={(e) => setAngularSpeed(parseFloat(e.target.value))}\n                      className=\"w-full h-2 bg-white/20 rounded-lg appearance-none\"\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* 建圖模式 */}\n            {currentMode === 'mapping' && (\n              <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\">\n                <h2 className=\"text-xl font-semibold text-white mb-4\">建圖工具</h2>\n                \n                <div className=\"space-y-3\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"輸入站點名稱\"\n                    value={newStationName}\n                    onChange={(e) => setNewStationName(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                  />\n                  <p className=\"text-sm text-gray-300\">點擊地圖新增站點</p>\n                  \n                  <button\n                    onClick={() => setIsMappingActive(!isMappingActive)}\n                    disabled={!rosConnected}\n                    className={`w-full flex items-center justify-center gap-2 px-4 py-3 ${\n                      isMappingActive ? 'bg-red-500 hover:bg-red-600' : 'bg-purple-500 hover:bg-purple-600'\n                    } disabled:bg-gray-600 text-white rounded-lg font-medium transition-all`}\n                  >\n                    <Map className=\"w-5 h-5\" />\n                    {isMappingActive ? '停止建圖' : '開始建圖'}\n                  </button>\n                </div>\n              </div>\n            )}\n\n            {/* 航點模式 */}\n            {currentMode === 'waypoints' && (\n              <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\">\n                <h2 className=\"text-xl font-semibold text-white mb-4\">航點管理</h2>\n                \n                <div className=\"space-y-3\">\n                  <button\n                    onClick={() => {\n                      if (waypoints.length === 0) {\n                        addLog('error', '沒有設定航點，無法開始巡邏');\n                        return;\n                      }\n                      setIsPatrolling(!isPatrolling);\n                      if (!isPatrolling) {\n                        setCurrentWaypointIndex(0);\n                        addLog('info', '開始自動巡邏');\n                      } else {\n                        addLog('info', '停止巡邏');\n                      }\n                    }}\n                    disabled={waypoints.length === 0 || !rosConnected}\n                    className=\"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg font-medium transition-all\"\n                  >\n                    {isPatrolling ? <Pause className=\"w-5 h-5\" /> : <Play className=\"w-5 h-5\" />}\n                    {isPatrolling ? '停止巡邏' : '開始巡邏'}\n                  </button>\n                  <p className=\"text-sm text-gray-300\">點擊地圖新增航點，點擊航點刪除</p>\n                </div>\n              </div>\n            )}\n\n            {/* 導航模式 */}\n            {currentMode === 'navigation' && (\n              <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\">\n                <h2 className=\"text-xl font-semibold text-white mb-4\">自主導航</h2>\n                \n                <div className=\"space-y-4\">\n                  {goalPose && (\n                    <div className=\"bg-black/20 rounded-lg p-3\">\n                      <p className=\"text-sm text-gray-300\">目標位置:</p>\n                      <p className=\"text-white\">({goalPose.x.toFixed(2)}, {goalPose.y.toFixed(2)})</p>\n                    </div>\n                  )}\n                  \n                  <button\n                    onClick={stopRobot}\n                    disabled={!rosConnected}\n                    className=\"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white rounded-lg font-medium transition-all\"\n                  >\n                    <Square className=\"w-5 h-5\" />\n                    停止導航\n                  </button>\n                  \n                  <p className=\"text-sm text-gray-300\">\n                    點擊地圖設置導航目標點\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {/* 站點列表 */}\n            <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\">\n              <h2 className=\"text-xl font-semibold text-white mb-4\">站點管理</h2>\n              \n              <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n                {stations.map(station => (\n                  <div key={station.id} className=\"flex items-center justify-between p-2 bg-white/10 rounded-lg\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className={`w-3 h-3 ${station.color} rounded`}></div>\n                      <span className=\"text-white text-sm\">{station.name}</span>\n                    </div>\n                    <div className=\"flex gap-1\">\n                      <button\n                        disabled={!rosConnected}\n                        className=\"p-1 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white rounded text-xs transition-all\"\n                      >\n                        前往\n                      </button>\n                      <button\n                        onClick={() => setStations(prev => prev.filter(s => s.id !== station.id))}\n                        className=\"p-1 bg-red-500 hover:bg-red-600 text-white rounded text-xs transition-all\"\n                      >\n                        <Trash2 className=\"w-3 h-3\" />\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* 快速動作 */}\n            <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20\">\n              <h2 className=\"text-xl font-semibold text-white mb-4\">快速動作</h2>\n              \n              <div className=\"grid grid-cols-1 gap-2\">\n                <button \n                  onClick={() => {\n                    const chargingStation = stations.find(s => s.type === 'charging');\n                    if (chargingStation) {\n                      const worldX = chargingStation.x;\n                      const worldY = chargingStation.y;\n                      setGoalPose({ x: worldX, y: worldY });\n                      addLog('info', `導航至充電站`);\n                    }\n                  }}\n                  disabled={!rosConnected || !stations.find(s => s.type === 'charging')}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\"\n                >\n                  <Home className=\"w-4 h-4\" />\n                  回充電站\n                </button>\n                <button \n                  onClick={stopRobot}\n                  disabled={!rosConnected}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-red-500 hover:bg-red-600 disabled:bg-gray-600 text-white rounded-lg text-sm transition-all\"\n                >\n                  <Square className=\"w-4 h-4\" />\n                  緊急停止\n                </button>\n                <button \n                  onClick={() => window.open('http://localhost:8080', '_blank')}\n                  className=\"flex items-center justify-center gap-2 px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm transition-all\"\n                >\n                  <Camera className=\"w-4 h-4\" />\n                  攝影機視圖\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TurtleBotInterface;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}